(()=>{var b=s=>s.trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\s\u00A0]+/g,"-").replace(/[^\w\-]+/g,"").replace(/--+/g,"-").replace(/^-+|-+$/g,""),S=s=>s<.5?2*s*s:-1+(4-2*s)*s,p={selector:"[ss-toc-comp]",headingSelector:"h1, h2, h3, h4, h5, h6",listType:"none",smoothScroll:!1,scrollSpeed:300,itemActiveClass:"is-active",offset:0},l={tocComp:"ss-toc-comp",tocContentComp:"ss-toc-content-comp",headingSelector:"ss-option-heading-selector",listType:"ss-option-list-type",smoothScroll:"ss-option-smooth-scroll",scrollSpeed:"ss-option-scroll-speed",itemActiveClass:"ss-option-item-active-class",offset:"ss-option-offset",item:{element:'[ss-toc-comp-ele="item"]',text:'[ss-toc-comp-ele="item-text"]'}};function T(s,e,t){if(s.length!==e.length)return console.error("TOC: Headings and TOC items count mismatch"),null;if(s.length===0)return null;let o=e[0]?.getAttribute(l.itemActiveClass)||"active",n=-1,c=r=>{let h=r.filter(d=>d.isIntersecting);if(h.length===0)return;let u=h.reduce((d,m)=>m.boundingClientRect.top<d.boundingClientRect.top?m:d),f=s.indexOf(u.target);f!==-1&&f!==n&&(n=f,requestAnimationFrame(()=>{e.forEach((d,m)=>{d.classList.toggle(o,m===f)}),t(u.target.id)}))},i={rootMargin:"-30px 0% -77%",threshold:.1},a=new IntersectionObserver(c,i);return s.forEach(r=>a.observe(r)),()=>a.disconnect()}var g=class{constructor(e,t,o={}){if(this.options={...p,...o},this.container=e,t instanceof NodeList||Array.isArray(t)?this.contentElements=Array.from(t):this.contentElements=[t],this.tocItems=[],this.usedIds=new Map,this.disconnectObserver=null,this.itemTemplate=null,!this.container)throw new Error("TOC: Container not found");if(this.contentElements.length===0||!this.contentElements[0])throw new Error("TOC: Content element(s) not found");this.init()}init(){this.buildToC(),this.options.smoothScroll&&this.enableSmoothScroll(),this.disconnectObserver=this.observeHeadings()}buildToC(){let e=[];if(this.contentElements.forEach(i=>{let a=i.querySelectorAll(this.options.headingSelector);e.push(...a)}),e.length===0){console.warn("TOC: No headings found in any content element");return}if(this.itemTemplate=this.container.querySelector(l.item.element),!this.itemTemplate){console.error("TOC: Item template not found");return}let t=this.itemTemplate.cloneNode(!0);this.container.innerHTML="";let o=document.createDocumentFragment(),n=this.options.listType==="ol",c=this.options.listType==="ul";e.forEach((i,a)=>{let r=this.createToCItem(t,i,a,n,c);o.appendChild(r)}),this.container.appendChild(o)}createToCItem(e,t,o,n,c){let i=e.cloneNode(!0),a=i.querySelector(l.item.text),r=t.textContent||"";if(a){let u=r;n?u=`${o+1}. ${r}`:c&&(u=`\u2022 ${r}`),a.textContent=u}else i.textContent=r;let h=t.id||this.generateReadableId(r);return t.id=h,i.setAttribute("href",`#${h}`),i.classList.remove(this.options.itemActiveClass),this.tocItems.push(i),i}generateReadableId(e){if(!e)return this.generateFallbackId();let t=b(e);if(!t)return this.generateFallbackId();let o=this.usedIds.get(t)||0;return this.usedIds.set(t,o+1),o>0?`${t}-${o}`:t}generateFallbackId(){return`toc-${Math.random().toString(36).substr(2,9)}`}enableSmoothScroll(){this.container.addEventListener("click",e=>{let t=e.target.closest('[href^="#"]');if(!t)return;e.preventDefault();let o=t.getAttribute("href")?.slice(1);if(!o)return;let n=document.getElementById(o);n&&this.smoothScrollTo(n)})}smoothScrollTo(e){let t=document.body.getBoundingClientRect().top,n=e.getBoundingClientRect().top-t-this.options.offset,c=window.pageYOffset,i=n-c,a=this.options.scrollSpeed,r=performance.now(),h=u=>{let f=u-r,d=Math.min(f/a,1),m=S(d);window.scrollTo(0,c+i*m),d<1&&requestAnimationFrame(h)};requestAnimationFrame(h)}observeHeadings(){let e=[];this.contentElements.forEach(o=>{let n=Array.from(o.querySelectorAll(this.options.headingSelector));e.push(...n)});let t=o=>{};return T(e,this.tocItems,t)}destroy(){this.disconnectObserver&&this.disconnectObserver(),this.tocItems=[],this.usedIds.clear(),this.container.innerHTML=""}};function w(){window.shaiksaifPowerUps=window.shaiksaifPowerUps||{},window.shaiksaifPowerUps.TOCInstances=window.shaiksaifPowerUps.TOCInstances||[],y(),document.querySelectorAll(`[${l.tocComp}]`).forEach(e=>{let t=e.getAttribute(l.tocComp),o=document.querySelectorAll(`[${l.tocContentComp}="${t}"]`);if(o.length===0){console.warn(`TOC: No content elements found for id "${t}"`);return}let n={headingSelector:e.getAttribute(l.headingSelector)||p.headingSelector,listType:e.getAttribute(l.listType)||p.listType,smoothScroll:e.getAttribute(l.smoothScroll)==="true",scrollSpeed:parseInt(e.getAttribute(l.scrollSpeed)||String(p.scrollSpeed),10),itemActiveClass:e.getAttribute(l.itemActiveClass)||p.itemActiveClass,offset:parseInt(e.getAttribute(l.offset)||String(p.offset),10)};try{let c=new g(e,o,n);window.shaiksaifPowerUps.TOCInstances.push(c)}catch(c){console.error("TOC: Failed to initialize",c)}})}function y(){if(typeof window.jQuery<"u"){let s=window.jQuery;s(document).off("click.wf-scroll"),console.log("TOC: Webflow smooth scroll disabled (jQuery)")}else document.querySelectorAll('a[href^="#"]').forEach(e=>{let t=e.cloneNode(!0);e.parentNode?.replaceChild(t,e)}),console.log("TOC: Webflow smooth scroll disabled (Vanilla JS)")}function C(){typeof window.Webflow<"u"&&Array.isArray(window.Webflow)?window.Webflow.push(function(){if(typeof window.jQuery<"u"){let s=window.jQuery;s(document).off("click.wf-scroll")}w()}):w()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",C):C();window.shaiksaifPowerUps=window.shaiksaifPowerUps||{};window.shaiksaifPowerUps.TableOfContents=g;})();
