(()=>{var S=document.querySelectorAll('[data-button-click="scroll"]');S.forEach(n=>{n.addEventListener("click",e=>{e.preventDefault();let t=n.getAttribute("href");if(t){let o=document.querySelector(t);if(o){let f=function(r){i===null&&(i=r);let a=r-i,h=m(a,l,c,d);window.scrollTo(0,h),a<d&&requestAnimationFrame(f)},m=function(r,a,h,b){return r/=b/2,r<1?h/2*r*r+a:(r--,-h/2*(r*(r-2)-1)+a)},s=o.getBoundingClientRect().top+window.pageYOffset,l=window.pageYOffset,c=s-l,d=1e3,i=null;requestAnimationFrame(f)}else console.warn("Target element not found:",t)}else console.warn("No href attribute found on button")})});var y=n=>n.trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\s\u00A0]+/g,"-").replace(/[^\w\-]+/g,"").replace(/--+/g,"-").replace(/^-+|-+$/g,""),A=n=>n<.5?2*n*n:-1+(4-2*n)*n,p={selector:"[ss-toc-comp]",headingSelector:"h1, h2, h3, h4, h5, h6",listType:"none",smoothScroll:!1,scrollSpeed:300,itemActiveClass:"is-active",offset:0},u={tocComp:"ss-toc-comp",tocContentComp:"ss-toc-content-comp",headingSelector:"ss-option-heading-selector",listType:"ss-option-list-type",smoothScroll:"ss-option-smooth-scroll",scrollSpeed:"ss-option-scroll-speed",itemActiveClass:"ss-option-item-active-class",offset:"ss-option-offset",item:{element:'[ss-toc-comp-ele="item"]',text:'[ss-toc-comp-ele="item-text"]'}};function T(n,e,t){if(n.length!==e.length)return console.error("TOC: Headings and TOC items count mismatch"),null;if(n.length===0)return null;let o=e[0]?.getAttribute(u.itemActiveClass)||"active",s=-1,l=i=>{let f=i.filter(a=>a.isIntersecting);if(f.length===0)return;let m=f.reduce((a,h)=>h.boundingClientRect.top<a.boundingClientRect.top?h:a),r=n.indexOf(m.target);r!==-1&&r!==s&&(s=r,requestAnimationFrame(()=>{e.forEach((a,h)=>{a.classList.toggle(o,h===r)}),t(m.target.id)}))},c={rootMargin:"-30px 0% -77%",threshold:.1},d=new IntersectionObserver(l,c);return n.forEach(i=>d.observe(i)),()=>d.disconnect()}var g=class{constructor(e,t,o={}){if(this.options={...p,...o},this.container=e,t instanceof NodeList||Array.isArray(t)?this.contentElements=Array.from(t):this.contentElements=[t],this.tocItems=[],this.usedIds=new Map,this.disconnectObserver=null,this.itemTemplate=null,!this.container)throw new Error("TOC: Container not found");if(this.contentElements.length===0||!this.contentElements[0])throw new Error("TOC: Content element(s) not found");this.init()}init(){this.buildToC(),this.options.smoothScroll&&this.enableSmoothScroll(),this.disconnectObserver=this.observeHeadings()}buildToC(){let e=[];if(this.contentElements.forEach(c=>{let d=c.querySelectorAll(this.options.headingSelector);e.push(...d)}),e.length===0){console.warn("TOC: No headings found in any content element");return}if(this.itemTemplate=this.container.querySelector(u.item.element),!this.itemTemplate){console.error("TOC: Item template not found");return}let t=this.itemTemplate.cloneNode(!0);this.container.innerHTML="";let o=document.createDocumentFragment(),s=this.options.listType==="ol",l=this.options.listType==="ul";e.forEach((c,d)=>{let i=this.createToCItem(t,c,d,s,l);o.appendChild(i)}),this.container.appendChild(o)}createToCItem(e,t,o,s,l){let c=e.cloneNode(!0),d=c.querySelector(u.item.text),i=t.textContent||"";if(d){let m=i;s?m=`${o+1}. ${i}`:l&&(m=`\u2022 ${i}`),d.textContent=m}else c.textContent=i;let f=t.id||this.generateReadableId(i);return t.id=f,c.setAttribute("href",`#${f}`),c.classList.remove(this.options.itemActiveClass),this.tocItems.push(c),c}generateReadableId(e){if(!e)return this.generateFallbackId();let t=y(e);if(!t)return this.generateFallbackId();let o=this.usedIds.get(t)||0;return this.usedIds.set(t,o+1),o>0?`${t}-${o}`:t}generateFallbackId(){return`toc-${Math.random().toString(36).substr(2,9)}`}enableSmoothScroll(){this.container.addEventListener("click",e=>{let t=e.target.closest('[href^="#"]');if(!t)return;e.preventDefault();let o=t.getAttribute("href")?.slice(1);if(!o)return;let s=document.getElementById(o);s&&this.smoothScrollTo(s)})}smoothScrollTo(e){let t=document.body.getBoundingClientRect().top,s=e.getBoundingClientRect().top-t-this.options.offset,l=window.pageYOffset,c=s-l,d=this.options.scrollSpeed,i=performance.now(),f=m=>{let r=m-i,a=Math.min(r/d,1),h=A(a);window.scrollTo(0,l+c*h),a<1&&requestAnimationFrame(f)};requestAnimationFrame(f)}observeHeadings(){let e=[];this.contentElements.forEach(o=>{let s=Array.from(o.querySelectorAll(this.options.headingSelector));e.push(...s)});let t=o=>{};return T(e,this.tocItems,t)}destroy(){this.disconnectObserver&&this.disconnectObserver(),this.tocItems=[],this.usedIds.clear(),this.container.innerHTML=""}};function w(){window.shaiksaifPowerUps=window.shaiksaifPowerUps||{},window.shaiksaifPowerUps.TOCInstances=window.shaiksaifPowerUps.TOCInstances||[],v(),document.querySelectorAll(`[${u.tocComp}]`).forEach(e=>{let t=e.getAttribute(u.tocComp),o=document.querySelectorAll(`[${u.tocContentComp}="${t}"]`);if(o.length===0){console.warn(`TOC: No content elements found for id "${t}"`);return}let s={headingSelector:e.getAttribute(u.headingSelector)||p.headingSelector,listType:e.getAttribute(u.listType)||p.listType,smoothScroll:e.getAttribute(u.smoothScroll)==="true",scrollSpeed:parseInt(e.getAttribute(u.scrollSpeed)||String(p.scrollSpeed),10),itemActiveClass:e.getAttribute(u.itemActiveClass)||p.itemActiveClass,offset:parseInt(e.getAttribute(u.offset)||String(p.offset),10)};try{let l=new g(e,o,s);window.shaiksaifPowerUps.TOCInstances.push(l)}catch(l){console.error("TOC: Failed to initialize",l)}})}function v(){if(typeof window.jQuery<"u"){let n=window.jQuery;n(document).off("click.wf-scroll"),console.log("TOC: Webflow smooth scroll disabled (jQuery)")}else document.querySelectorAll('a[href^="#"]').forEach(e=>{let t=e.cloneNode(!0);e.parentNode?.replaceChild(t,e)}),console.log("TOC: Webflow smooth scroll disabled (Vanilla JS)")}function C(){typeof window.Webflow<"u"&&Array.isArray(window.Webflow)?window.Webflow.push(function(){if(typeof window.jQuery<"u"){let n=window.jQuery;n(document).off("click.wf-scroll")}w()}):w()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",C):C();window.shaiksaifPowerUps=window.shaiksaifPowerUps||{};window.shaiksaifPowerUps.TableOfContents=g;})();
