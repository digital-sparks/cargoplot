(()=>{var Ue=Object.create;var xe=Object.defineProperty;var qe=Object.getOwnPropertyDescriptor;var Ke=Object.getOwnPropertyNames;var Ye=Object.getPrototypeOf,Ge=Object.prototype.hasOwnProperty;var pe=(w,c)=>()=>(c||w((c={exports:{}}).exports,c),c.exports);var Je=(w,c,o,m)=>{if(c&&typeof c=="object"||typeof c=="function")for(let h of Ke(c))!Ge.call(w,h)&&h!==o&&xe(w,h,{get:()=>c[h],enumerable:!(m=qe(c,h))||m.enumerable});return w};var ue=(w,c,o)=>(o=w!=null?Ue(Ye(w)):{},Je(c||!w||!w.__esModule?xe(o,"default",{value:w,enumerable:!0}):o,w));var _e=pe((ce,ke)=>{(function(w,c){typeof ce=="object"&&typeof ke=="object"?ke.exports=c():typeof define=="function"&&define.amd?define([],c):typeof ce=="object"?ce.AirDatepicker=c():w.AirDatepicker=c()})(ce,function(){return function(){"use strict";var w={d:function(d,e){for(var i in e)w.o(e,i)&&!w.o(d,i)&&Object.defineProperty(d,i,{enumerable:!0,get:e[i]})},o:function(d,e){return Object.prototype.hasOwnProperty.call(d,e)}},c={};w.d(c,{default:function(){return X}});var o={days:"days",months:"months",years:"years",day:"day",month:"month",year:"year",eventChangeViewDate:"changeViewDate",eventChangeCurrentView:"changeCurrentView",eventChangeFocusDate:"changeFocusDate",eventChangeSelectedDate:"changeSelectedDate",eventChangeTime:"changeTime",eventChangeLastSelectedDate:"changeLastSelectedDate",actionSelectDate:"selectDate",actionUnselectDate:"unselectDate",cssClassWeekend:"-weekend-"},m={classes:"",inline:!1,locale:{days:["\u0412\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435","\u041F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A","\u0412\u0442\u043E\u0440\u043D\u0438\u043A","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041F\u044F\u0442\u043D\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043E\u0442\u0430"],daysShort:["\u0412\u043E\u0441","\u041F\u043E\u043D","\u0412\u0442\u043E","\u0421\u0440\u0435","\u0427\u0435\u0442","\u041F\u044F\u0442","\u0421\u0443\u0431"],daysMin:["\u0412\u0441","\u041F\u043D","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041F\u0442","\u0421\u0431"],months:["\u042F\u043D\u0432\u0430\u0440\u044C","\u0424\u0435\u0432\u0440\u0430\u043B\u044C","\u041C\u0430\u0440\u0442","\u0410\u043F\u0440\u0435\u043B\u044C","\u041C\u0430\u0439","\u0418\u044E\u043D\u044C","\u0418\u044E\u043B\u044C","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u041E\u043A\u0442\u044F\u0431\u0440\u044C","\u041D\u043E\u044F\u0431\u0440\u044C","\u0414\u0435\u043A\u0430\u0431\u0440\u044C"],monthsShort:["\u042F\u043D\u0432","\u0424\u0435\u0432","\u041C\u0430\u0440","\u0410\u043F\u0440","\u041C\u0430\u0439","\u0418\u044E\u043D","\u0418\u044E\u043B","\u0410\u0432\u0433","\u0421\u0435\u043D","\u041E\u043A\u0442","\u041D\u043E\u044F","\u0414\u0435\u043A"],today:"\u0421\u0435\u0433\u043E\u0434\u043D\u044F",clear:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1},startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"T",toggleSelected:!0,keyboardNav:!0,selectedDates:!1,container:"",isMobile:!1,visible:!1,position:"bottom left",offset:12,view:o.days,minView:o.days,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:", ",range:!1,dynamicRange:!0,buttons:!1,monthsField:"monthsShort",showEvent:"focus",autoClose:!1,fixedHeight:!1,prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function h(d){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return typeof d=="string"?e.querySelector(d):d}function k(){let{tagName:d="div",className:e="",innerHtml:i="",id:t="",attrs:s={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=document.createElement(d);return e&&r.classList.add(...e.split(" ")),t&&(r.id=t),i&&(r.innerHTML=i),s&&L(r,s),r}function L(d,e){for(let[i,t]of Object.entries(e))t!==void 0&&d.setAttribute(i,t);return d}function E(d){return new Date(d.getFullYear(),d.getMonth()+1,0).getDate()}function M(d){let e=d.getHours(),{hours:i,dayPeriod:t}=C(e);return{year:d.getFullYear(),month:d.getMonth(),fullMonth:d.getMonth()+1<10?"0"+(d.getMonth()+1):d.getMonth()+1,date:d.getDate(),fullDate:d.getDate()<10?"0"+d.getDate():d.getDate(),day:d.getDay(),hours:e,fullHours:_(e),hours12:i,dayPeriod:t,fullHours12:_(i),minutes:d.getMinutes(),fullMinutes:d.getMinutes()<10?"0"+d.getMinutes():d.getMinutes()}}function C(d){return{dayPeriod:d>11?"pm":"am",hours:d%12==0?12:d%12}}function _(d){return d<10?"0"+d:d}function F(d){let e=10*Math.floor(d.getFullYear()/10);return[e,e+9]}function P(){let d=[];for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return i.forEach(s=>{if(typeof s=="object")for(let r in s)s[r]&&d.push(r);else s&&d.push(s)}),d.join(" ")}function x(d,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o.days;if(!d||!e)return!1;let t=M(d),s=M(e);return{[o.days]:t.date===s.date&&t.month===s.month&&t.year===s.year,[o.months]:t.month===s.month&&t.year===s.year,[o.years]:t.year===s.year}[i]}function R(d,e,i){let t=Q(d,!1).getTime(),s=Q(e,!1).getTime();return i?t>=s:t>s}function q(d,e){return!R(d,e,!0)}function Q(d){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=new Date(d.getTime());return typeof e!="boolean"||e||function(t){t.setHours(0,0,0,0)}(i),i}function y(d,e,i){d.length?d.forEach(t=>{t.addEventListener(e,i)}):d.addEventListener(e,i)}function O(d,e){return!(!d||d===document||d instanceof DocumentFragment)&&(d.matches(e)?d:O(d.parentNode,e))}function A(d,e,i){return d>i?i:d<e?e:d}function j(d){for(var e=arguments.length,i=new Array(e>1?e-1:0),t=1;t<e;t++)i[t-1]=arguments[t];return i.filter(s=>s).forEach(s=>{for(let[r,a]of Object.entries(s))if(a!==void 0&&a.toString()==="[object Object]"){let n=d[r]!==void 0?d[r].toString():void 0,l=a.toString(),p=Array.isArray(a)?[]:{};d[r]=d[r]?n!==l?p:d[r]:p,j(d[r],a)}else d[r]=a}),d}function S(d){let e=d;return d instanceof Date||(typeof d=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(d)&&(d+="T00:00:00"),e=new Date(d)),isNaN(e.getTime())&&(console.log(`Unable to convert value "${d}" to Date object`),e=!1),e}function f(d){let e="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+e+")("+d+")($|<|"+e+")","g")}function T(d,e,i){return(e=function(t){var s=function(r,a){if(typeof r!="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var l=n.call(r,"string");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(t);return typeof s=="symbol"?s:String(s)}(e))in d?Object.defineProperty(d,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):d[e]=i,d}class H{constructor(){let{type:e,date:i,dp:t,opts:s,body:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};T(this,"focus",()=>{this.$cell.classList.add("-focus-"),this.focused=!0}),T(this,"removeFocus",()=>{this.$cell.classList.remove("-focus-"),this.focused=!1}),T(this,"select",()=>{this.$cell.classList.add("-selected-"),this.selected=!0}),T(this,"removeSelect",()=>{this.$cell.classList.remove("-selected-","-range-from-","-range-to-"),this.selected=!1}),T(this,"onChangeSelectedDate",()=>{this.isDisabled||(this._handleSelectedStatus(),this.opts.range&&this._handleRangeStatus())}),T(this,"onChangeFocusDate",a=>{if(!a)return void(this.focused&&this.removeFocus());let n=x(a,this.date,this.type);n?this.focus():!n&&this.focused&&this.removeFocus(),this.opts.range&&this._handleRangeStatus()}),T(this,"render",()=>(this.$cell.innerHTML=this._getHtml(),this._handleClasses(),this.$cell)),this.type=e,this.singleType=this.type.slice(0,-1),this.date=i,this.dp=t,this.opts=s,this.body=r,this.customData=!1,this.init()}init(){var e,i;let{onRenderCell:t}=this.opts;t&&(this.customData=t({date:this.date,cellType:this.singleType,datepicker:this.dp})),this._createElement(),this._bindDatepickerEvents(),(e=this.customData)!==null&&e!==void 0&&e.disabled?this.dp.disableDate(this.date):((i=this.customData)===null||i===void 0?void 0:i.disabled)===!1&&this.dp.enableDate(this.date)}_bindDatepickerEvents(){this.dp.on(o.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(o.eventChangeFocusDate,this.onChangeFocusDate)}unbindDatepickerEvents(){this.dp.off(o.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(o.eventChangeFocusDate,this.onChangeFocusDate)}_createElement(){var e;let{year:i,month:t,fullMonth:s,date:r,fullDate:a}=M(this.date),n=((e=this.customData)===null||e===void 0?void 0:e.attrs)||{};this.$cell=k({attrs:{"data-year":i,"data-month":t,"data-date":r,"data-iso-date":`${i}-${s}-${a}`,...n}}),this.$cell.adpCell=this}_getClassName(){var e;let i=new Date,{selectOtherMonths:t,selectOtherYears:s}=this.opts,{minDate:r,maxDate:a,isDateDisabled:n}=this.dp,{day:l}=M(this.date),p=this._isOutOfMinMaxRange(),g=n(this.date),u=P("air-datepicker-cell",`-${this.singleType}-`,{"-current-":x(i,this.date,this.type),"-min-date-":r&&x(r,this.date,this.type),"-max-date-":a&&x(a,this.date,this.type)}),v="";switch(this.type){case o.days:v=P({"-weekend-":this.dp.isWeekend(l),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!t||p||g});break;case o.months:v=P({"-disabled-":p});break;case o.years:v=P({"-other-decade-":this.isOtherDecade,"-disabled-":p||this.isOtherDecade&&!s})}return P(u,v,(e=this.customData)===null||e===void 0?void 0:e.classes).split(" ")}_getHtml(){var e;let{year:i,month:t,date:s}=M(this.date),{showOtherMonths:r,showOtherYears:a}=this.opts;if((e=this.customData)!==null&&e!==void 0&&e.html)return this.customData.html;switch(this.type){case o.days:return!r&&this.isOtherMonth?"":s;case o.months:return this.dp.locale[this.opts.monthsField][t];case o.years:return!a&&this.isOtherDecade?"":i}}_isOutOfMinMaxRange(){let{minDate:e,maxDate:i}=this.dp,{type:t,date:s}=this,{month:r,year:a,date:n}=M(s),l=t===o.days,p=t===o.years,g=!!e&&new Date(a,p?e.getMonth():r,l?n:e.getDate()),u=!!i&&new Date(a,p?i.getMonth():r,l?n:i.getDate());return e&&i?q(g,e)||R(u,i):e?q(g,e):i?R(u,i):void 0}destroy(){this.unbindDatepickerEvents()}_handleRangeStatus(){let{selectedDates:e,focusDate:i,rangeDateTo:t,rangeDateFrom:s}=this.dp,r=e.length;if(this.$cell.classList.remove("-range-from-","-range-to-","-in-range-"),!r)return;let a=s,n=t;if(r===1&&i){let v=R(i,e[0]);a=v?e[0]:i,n=v?i:e[0]}let l=P({"-in-range-":a&&n&&(p=this.date,g=a,u=n,R(p,g)&&q(p,u)),"-range-from-":a&&x(this.date,a,this.type),"-range-to-":n&&x(this.date,n,this.type)});var p,g,u;l&&this.$cell.classList.add(...l.split(" "))}_handleSelectedStatus(){let e=this.dp._checkIfDateIsSelected(this.date,this.type);e?this.select():!e&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){x(this.dp.focusDate,this.date,this.type)&&this.focus()}_handleClasses(){this.$cell.setAttribute("class",""),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&(this._handleSelectedStatus(),this.dp.opts.range&&this._handleRangeStatus()),this.$cell.classList.add(...this._getClassName())}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.dp.isOtherMonth(this.date)}get isOtherDecade(){return this.dp.isOtherDecade(this.date)}}function V(d,e,i){return(e=function(t){var s=function(r,a){if(typeof r!="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var l=n.call(r,"string");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(t);return typeof s=="symbol"?s:String(s)}(e))in d?Object.defineProperty(d,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):d[e]=i,d}let se={[o.days]:`<div class="air-datepicker-body--day-names"></div><div class="air-datepicker-body--cells -${o.days}-"></div>`,[o.months]:`<div class="air-datepicker-body--cells -${o.months}-"></div>`,[o.years]:`<div class="air-datepicker-body--cells -${o.years}-"></div>`},K=".air-datepicker-cell";class J{constructor(e){let{dp:i,type:t,opts:s}=e;V(this,"handleClick",r=>{let a=r.target.closest(K).adpCell;if(a.isDisabled)return;if(!this.dp.isMinViewReached)return void this.dp.down();let n=this.dp._checkIfDateIsSelected(a.date,a.type);n?this.dp._handleAlreadySelectedDates(n,a.date):this.dp.selectDate(a.date)}),V(this,"handleDayNameClick",r=>{let a=r.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(a),datepicker:this.dp})}),V(this,"onChangeCurrentView",r=>{r!==this.type?this.hide():(this.show(),this.render())}),V(this,"onMouseOverCell",r=>{let a=O(r.target,K);this.dp.setFocusDate(!!a&&a.adpCell.date)}),V(this,"onMouseOutCell",()=>{this.dp.setFocusDate(!1)}),V(this,"onClickBody",r=>{let{onClickDayName:a}=this.opts,n=r.target;n.closest(K)&&this.handleClick(r),a&&n.closest(".air-datepicker-body--day-name")&&this.handleDayNameClick(r)}),V(this,"onMouseDown",r=>{this.pressed=!0;let a=O(r.target,K),n=a&&a.adpCell;x(n.date,this.dp.rangeDateFrom)&&(this.rangeFromFocused=!0),x(n.date,this.dp.rangeDateTo)&&(this.rangeToFocused=!0)}),V(this,"onMouseMove",r=>{if(!this.pressed||!this.dp.isMinViewReached)return;r.preventDefault();let a=O(r.target,K),n=a&&a.adpCell,{selectedDates:l,rangeDateTo:p,rangeDateFrom:g}=this.dp;if(!n||n.isDisabled)return;let{date:u}=n;if(l.length===2){if(this.rangeFromFocused&&!R(u,p)){let{hours:v,minutes:I}=M(g);u.setHours(v),u.setMinutes(I),this.dp.rangeDateFrom=u,this.dp.replaceDate(g,u)}if(this.rangeToFocused&&!q(u,g)){let{hours:v,minutes:I}=M(p);u.setHours(v),u.setMinutes(I),this.dp.rangeDateTo=u,this.dp.replaceDate(p,u)}}}),V(this,"onMouseUp",()=>{this.pressed=!1,this.rangeFromFocused=!1,this.rangeToFocused=!1}),V(this,"onChangeViewDate",(r,a)=>{if(!this.isVisible)return;let n=F(r),l=F(a);switch(this.dp.currentView){case o.days:if(x(r,a,o.months))return;break;case o.months:if(x(r,a,o.years))return;break;case o.years:if(n[0]===l[0]&&n[1]===l[1])return}this.render()}),V(this,"render",()=>{this.destroyCells(),this._generateCells(),this.cells.forEach(r=>{this.$cells.appendChild(r.render())})}),this.dp=i,this.type=t,this.opts=s,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.type===o.days&&this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}_bindEvents(){let{range:e,dynamicRange:i}=this.opts;y(this.$el,"mouseover",this.onMouseOverCell),y(this.$el,"mouseout",this.onMouseOutCell),y(this.$el,"click",this.onClickBody),e&&i&&(y(this.$el,"mousedown",this.onMouseDown),y(this.$el,"mousemove",this.onMouseMove),y(window.document,"mouseup",this.onMouseUp))}_bindDatepickerEvents(){this.dp.on(o.eventChangeViewDate,this.onChangeViewDate),this.dp.on(o.eventChangeCurrentView,this.onChangeCurrentView)}_buildBaseHtml(){this.$el=k({className:`air-datepicker-body -${this.type}-`,innerHtml:se[this.type]}),this.$names=h(".air-datepicker-body--day-names",this.$el),this.$cells=h(".air-datepicker-body--cells",this.$el)}_getDayNamesHtml(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dp.locale.firstDay,i="",t=this.dp.isWeekend,{onClickDayName:s}=this.opts,r=e,a=0;for(;a<7;){let n=r%7;i+=`<div class="${P("air-datepicker-body--day-name",{[o.cssClassWeekend]:t(n),"-clickable-":!!s})}" data-day-index='${n}'>${this.dp.locale.daysMin[n]}</div>`,a++,r++}return i}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCell(e){let{type:i,dp:t,opts:s}=this;return new H({type:i,dp:t,opts:s,date:e,body:this})}_generateCells(){J.getDatesFunction(this.type)(this.dp,e=>{this.cells.push(this._generateCell(e))})}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach(e=>e.destroy()),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.dp.off(o.eventChangeViewDate,this.onChangeViewDate),this.dp.off(o.eventChangeCurrentView,this.onChangeCurrentView)}static getDaysDates(e,i){let{viewDate:t,opts:{fixedHeight:s},locale:{firstDay:r}}=e,a=E(t),{year:n,month:l}=M(t),p=new Date(n,l,1),g=new Date(n,l,a),u=p.getDay()-r,v=6-g.getDay()+r;u=u<0?u+7:u,v=v>6?v-7:v;let I=function(re,be){let{year:he,month:Be,date:je}=M(re);return new Date(he,Be,je-be)}(p,u),B=a+u+v,z=I.getDate(),{year:G,month:le}=M(I),ie=0;s&&(B=42);let ae=[];for(;ie<B;){let re=new Date(G,le,z+ie);i&&i(re),ae.push(re),ie++}return ae}static getMonthsDates(e,i){let{year:t}=e.parsedViewDate,s=0,r=[];for(;s<12;){let a=new Date(t,s);r.push(a),i&&i(a),s++}return r}static getYearsDates(e,i){let t=F(e.viewDate),s=t[0]-1,r=t[1]+1,a=s,n=[];for(;a<=r;){let l=new Date(a,0);n.push(l),i&&i(l),a++}return n}static getDatesFunction(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o.days;return{[o.days]:J.getDaysDates,[o.months]:J.getMonthsDates,[o.years]:J.getYearsDates}[e]}}function U(d,e,i){return(e=function(t){var s=function(r,a){if(typeof r!="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var l=n.call(r,"string");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(t);return typeof s=="symbol"?s:String(s)}(e))in d?Object.defineProperty(d,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):d[e]=i,d}class ee{constructor(e){let{dp:i,opts:t}=e;U(this,"onClickNav",s=>{let r=O(s.target,".air-datepicker-nav--action");if(!r)return;let a=r.dataset.action;this.dp[a]()}),U(this,"onChangeViewDate",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),U(this,"onChangeCurrentView",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),U(this,"onClickNavTitle",()=>{this.dp.isFinalView||this.dp.up()}),U(this,"update",()=>{let{prevHtml:s,nextHtml:r}=this.opts;this.$prev.innerHTML=s,this.$next.innerHTML=r,this._resetNavStatus(),this.render(),this.handleNavStatus()}),U(this,"renderDelay",()=>{setTimeout(this.render)}),U(this,"render",()=>{this.$title.innerHTML=this._getTitle(),function(s,r){for(let a in r)r[a]?s.classList.add(a):s.classList.remove(a)}(this.$title,{"-disabled-":this.dp.isFinalView})}),this.dp=i,this.opts=t,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}_defineDOM(){this.$title=h(".air-datepicker-nav--title",this.$el),this.$prev=h('[data-action="prev"]',this.$el),this.$next=h('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle)}_bindDatepickerEvents(){this.dp.on(o.eventChangeViewDate,this.onChangeViewDate),this.dp.on(o.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.on(o.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.on(o.eventChangeTime,this.render))}destroy(){this.dp.off(o.eventChangeViewDate,this.onChangeViewDate),this.dp.off(o.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.off(o.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.off(o.eventChangeTime,this.render))}_createElement(){this.$el=k({tagName:"nav",className:"air-datepicker-nav"})}_getTitle(){let{dp:e,opts:i}=this,t=i.navTitles[e.currentView];return typeof t=="function"?t(e):e.formatDate(e.viewDate,t)}handleNavStatus(){let{disableNavWhenOutOfRange:e}=this.opts,{minDate:i,maxDate:t}=this.dp;if(!i&&!t||!e)return;let{year:s,month:r}=this.dp.parsedViewDate,a=!!i&&M(i),n=!!t&&M(t);switch(this.dp.currentView){case o.days:i&&a.month>=r&&a.year>=s&&this._disableNav("prev"),t&&n.month<=r&&n.year<=s&&this._disableNav("next");break;case o.months:i&&a.year>=s&&this._disableNav("prev"),t&&n.year<=s&&this._disableNav("next");break;case o.years:{let l=F(this.dp.viewDate);i&&a.year>=l[0]&&this._disableNav("prev"),t&&n.year<=l[1]&&this._disableNav("next");break}}}_disableNav(e){h('[data-action="'+e+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){(function(e){for(var i=arguments.length,t=new Array(i>1?i-1:0),s=1;s<i;s++)t[s-1]=arguments[s];e.length?e.forEach(r=>{r.classList.remove(...t)}):e.classList.remove(...t)})(this.$el.querySelectorAll(".air-datepicker-nav--action"),"-disabled-")}_buildBaseHtml(){let{prevHtml:e,nextHtml:i}=this.opts;this.$el.innerHTML=`<div class="air-datepicker-nav--action" data-action="prev">${e}</div><div class="air-datepicker-nav--title"></div><div class="air-datepicker-nav--action" data-action="next">${i}</div>`}get isNavIsFunction(){let{navTitles:e}=this.opts;return Object.keys(e).find(i=>typeof e[i]=="function")}}var Y={today:{content:d=>d.locale.today,onClick:d=>d.setViewDate(new Date)},clear:{content:d=>d.locale.clear,onClick:d=>d.clear()}};class oe{constructor(e){let{dp:i,opts:t}=e;this.dp=i,this.opts=t,this.init()}init(){this.createElement(),this.render()}createElement(){this.$el=k({className:"air-datepicker-buttons"})}destroy(){this.$el.parentNode.removeChild(this.$el)}clearHtml(){return this.$el.innerHTML="",this}generateButtons(){let{buttons:e}=this.opts;Array.isArray(e)||(e=[e]),e.forEach(i=>{let t=i;typeof i=="string"&&Y[i]&&(t=Y[i]);let s=this.createButton(t);t.onClick&&this.attachEventToButton(s,t.onClick),this.$el.appendChild(s)})}attachEventToButton(e,i){e.addEventListener("click",()=>{i(this.dp)})}createButton(e){let{content:i,className:t,tagName:s="button",attrs:r={}}=e;return k({tagName:s,innerHtml:`<span tabindex='-1'>${typeof i=="function"?i(this.dp):i}</span>`,className:P("air-datepicker-button",t),attrs:r})}render(){this.generateButtons()}}function N(d,e,i){return(e=function(t){var s=function(r,a){if(typeof r!="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var l=n.call(r,"string");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(t);return typeof s=="symbol"?s:String(s)}(e))in d?Object.defineProperty(d,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):d[e]=i,d}class ne{constructor(){let{opts:e,dp:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};N(this,"toggleTimepickerIsActive",s=>{this.dp.timepickerIsActive=s}),N(this,"onChangeSelectedDate",s=>{let{date:r,updateTime:a=!1}=s;r&&(this.setMinMaxTime(r),this.setCurrentTime(!!a&&r),this.addTimeToDate(r))}),N(this,"onChangeLastSelectedDate",s=>{s&&(this.setTime(s),this.render())}),N(this,"onChangeInputRange",s=>{let r=s.target;this[r.getAttribute("name")]=r.value,this.updateText(),this.dp.trigger(o.eventChangeTime,{hours:this.hours,minutes:this.minutes})}),N(this,"onMouseEnterLeave",s=>{let r=s.target.getAttribute("name"),a=this.$minutesText;r==="hours"&&(a=this.$hoursText),a.classList.toggle("-focus-")}),N(this,"onFocus",()=>{this.toggleTimepickerIsActive(!0)}),N(this,"onBlur",()=>{this.toggleTimepickerIsActive(!1)}),this.opts=e,this.dp=i;let{timeFormat:t}=this.dp.locale;t&&(t.match(f("h"))||t.match(f("hh")))&&(this.ampm=!0),this.init()}init(){this.setTime(this.dp.lastSelectedDate||this.dp.viewDate),this.createElement(),this.buildHtml(),this.defineDOM(),this.render(),this.bindDatepickerEvents(),this.bindDOMEvents()}bindDatepickerEvents(){this.dp.on(o.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(o.eventChangeLastSelectedDate,this.onChangeLastSelectedDate)}bindDOMEvents(){let e="input";navigator.userAgent.match(/trident/gi)&&(e="change"),y(this.$ranges,e,this.onChangeInputRange),y(this.$ranges,"mouseenter",this.onMouseEnterLeave),y(this.$ranges,"mouseleave",this.onMouseEnterLeave),y(this.$ranges,"focus",this.onFocus),y(this.$ranges,"mousedown",this.onFocus),y(this.$ranges,"blur",this.onBlur)}createElement(){this.$el=k({className:P("air-datepicker-time",{"-am-pm-":this.dp.ampm})})}destroy(){this.dp.off(o.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(o.eventChangeLastSelectedDate,this.onChangeLastSelectedDate),this.$el.parentNode.removeChild(this.$el)}buildHtml(){let{ampm:e,hours:i,displayHours:t,minutes:s,minHours:r,minMinutes:a,maxHours:n,maxMinutes:l,dayPeriod:p,opts:{hoursStep:g,minutesStep:u}}=this;this.$el.innerHTML=`<div class="air-datepicker-time--current">   <span class="air-datepicker-time--current-hours">${_(t)}</span>   <span class="air-datepicker-time--current-colon">:</span>   <span class="air-datepicker-time--current-minutes">${_(s)}</span>   `+(e?`<span class='air-datepicker-time--current-ampm'>${p}</span>`:"")+`</div><div class="air-datepicker-time--sliders">   <div class="air-datepicker-time--row">      <input type="range" name="hours" value="${i}" min="${r}" max="${n}" step="${g}"/>   </div>   <div class="air-datepicker-time--row">      <input type="range" name="minutes" value="${s}" min="${a}" max="${l}" step="${u}"/>   </div></div>`}defineDOM(){let e=i=>h(i,this.$el);this.$ranges=this.$el.querySelectorAll('[type="range"]'),this.$hours=e('[name="hours"]'),this.$minutes=e('[name="minutes"]'),this.$hoursText=e(".air-datepicker-time--current-hours"),this.$minutesText=e(".air-datepicker-time--current-minutes"),this.$ampm=e(".air-datepicker-time--current-ampm")}setTime(e){this.setMinMaxTime(e),this.setCurrentTime(e)}addTimeToDate(e){e&&(e.setHours(this.hours),e.setMinutes(this.minutes))}setMinMaxTime(e){if(this.setMinMaxTimeFromOptions(),e){let{minDate:i,maxDate:t}=this.dp;i&&x(e,i)&&this.setMinTimeFromMinDate(i),t&&x(e,t)&&this.setMaxTimeFromMaxDate(t)}}setCurrentTime(e){let{hours:i,minutes:t}=e?M(e):this;this.hours=A(i,this.minHours,this.maxHours),this.minutes=A(t,this.minMinutes,this.maxMinutes)}setMinMaxTimeFromOptions(){let{minHours:e,minMinutes:i,maxHours:t,maxMinutes:s}=this.opts;this.minHours=A(e,0,23),this.minMinutes=A(i,0,59),this.maxHours=A(t,0,23),this.maxMinutes=A(s,0,59)}setMinTimeFromMinDate(e){let{lastSelectedDate:i}=this.dp;this.minHours=e.getHours(),i&&i.getHours()>e.getHours()?this.minMinutes=this.opts.minMinutes:this.minMinutes=e.getMinutes()}setMaxTimeFromMaxDate(e){let{lastSelectedDate:i}=this.dp;this.maxHours=e.getHours(),i&&i.getHours()<e.getHours()?this.maxMinutes=this.opts.maxMinutes:this.maxMinutes=e.getMinutes()}updateSliders(){L(this.$hours,{min:this.minHours,max:this.maxHours}).value=this.hours,L(this.$minutes,{min:this.minMinutes,max:this.maxMinutes}).value=this.minutes}updateText(){this.$hoursText.innerHTML=_(this.displayHours),this.$minutesText.innerHTML=_(this.minutes),this.ampm&&(this.$ampm.innerHTML=this.dayPeriod)}set hours(e){this._hours=e;let{hours:i,dayPeriod:t}=C(e);this.displayHours=this.ampm?i:e,this.dayPeriod=t}get hours(){return this._hours}render(){this.updateSliders(),this.updateText()}}function te(d,e,i){return(e=function(t){var s=function(r,a){if(typeof r!="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var l=n.call(r,"string");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(t);return typeof s=="symbol"?s:String(s)}(e))in d?Object.defineProperty(d,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):d[e]=i,d}class ze{constructor(e){let{dp:i,opts:t}=e;te(this,"pressedKeys",new Set),te(this,"hotKeys",new Map([[[["Control","ArrowRight"],["Control","ArrowUp"]],s=>s.month++],[[["Control","ArrowLeft"],["Control","ArrowDown"]],s=>s.month--],[[["Shift","ArrowRight"],["Shift","ArrowUp"]],s=>s.year++],[[["Shift","ArrowLeft"],["Shift","ArrowDown"]],s=>s.year--],[[["Alt","ArrowRight"],["Alt","ArrowUp"]],s=>s.year+=10],[[["Alt","ArrowLeft"],["Alt","ArrowDown"]],s=>s.year-=10],[["Control","Shift","ArrowUp"],(s,r)=>r.up()]])),te(this,"handleHotKey",s=>{let r=this.hotKeys.get(s),a=M(this.getInitialFocusDate());r(a,this.dp);let{year:n,month:l,date:p}=a,g=E(new Date(n,l));g<p&&(p=g);let u=this.dp.getClampedDate(new Date(n,l,p));this.dp.setFocusDate(u,{viewDateTransition:!0})}),te(this,"isHotKeyPressed",()=>{let s=!1,r=this.pressedKeys.size,a=n=>this.pressedKeys.has(n);for(let[n]of this.hotKeys){if(s)break;if(Array.isArray(n[0]))n.forEach(l=>{s||r!==l.length||(s=l.every(a)&&n)});else{if(r!==n.length)continue;s=n.every(a)&&n}}return s}),te(this,"isArrow",s=>s>=37&&s<=40),te(this,"onKeyDown",s=>{if(!this.dp.visible&&!this.dp.treatAsInline)return;let{key:r,which:a}=s,{dp:n,dp:{focusDate:l},opts:p}=this;this.registerKey(r);let g=this.isHotKeyPressed();if(g)return s.preventDefault(),void this.handleHotKey(g);if(this.isArrow(a))return s.preventDefault(),void this.focusNextCell(r);if(r==="Enter"){if(n.currentView!==p.minView)return void n.down();if(l){let u=n._checkIfDateIsSelected(l);return void(u?n._handleAlreadySelectedDates(u,l):n.selectDate(l))}}r==="Escape"&&this.dp.hide()}),te(this,"onKeyUp",s=>{this.removeKey(s.key)}),this.dp=i,this.opts=t,this.init()}init(){this.bindKeyboardEvents()}bindKeyboardEvents(){let{$el:e}=this.dp;e.addEventListener("keydown",this.onKeyDown),e.addEventListener("keyup",this.onKeyUp)}destroy(){let{$el:e}=this.dp;e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("keyup",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}getInitialFocusDate(){let{focusDate:e,currentView:i,selectedDates:t,parsedViewDate:{year:s,month:r}}=this.dp,a=e||t[t.length-1];if(!a)switch(i){case o.days:a=new Date(s,r,new Date().getDate());break;case o.months:a=new Date(s,r,1);break;case o.years:a=new Date(s,0,1)}return a}focusNextCell(e){let i=this.getInitialFocusDate(),{currentView:t}=this.dp,{days:s,months:r,years:a}=o,n=M(i),l=n.year,p=n.month,g=n.date;switch(e){case"ArrowLeft":t===s&&(g-=1),t===r&&(p-=1),t===a&&(l-=1);break;case"ArrowUp":t===s&&(g-=7),t===r&&(p-=3),t===a&&(l-=4);break;case"ArrowRight":t===s&&(g+=1),t===r&&(p+=1),t===a&&(l+=1);break;case"ArrowDown":t===s&&(g+=7),t===r&&(p+=3),t===a&&(l+=4)}let u=this.dp.getClampedDate(new Date(l,p,g));this.dp.setFocusDate(u,{viewDateTransition:!0})}registerKey(e){this.pressedKeys.add(e)}removeKey(e){this.pressedKeys.delete(e)}}let Re={on(d,e){this.__events||(this.__events={}),this.__events[d]?this.__events[d].push(e):this.__events[d]=[e]},off(d,e){this.__events&&this.__events[d]&&(this.__events[d]=this.__events[d].filter(i=>i!==e))},removeAllEvents(){this.__events={}},trigger(d){for(var e=arguments.length,i=new Array(e>1?e-1:0),t=1;t<e;t++)i[t-1]=arguments[t];this.__events&&this.__events[d]&&this.__events[d].forEach(s=>{s(...i)})}};function $(d,e,i){return(e=function(t){var s=function(r,a){if(typeof r!="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var l=n.call(r,"string");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(t);return typeof s=="symbol"?s:String(s)}(e))in d?Object.defineProperty(d,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):d[e]=i,d}let de="",W="",ye=!1;class X{static buildGlobalContainer(e){ye=!0,de=k({className:e,id:e}),h("body").appendChild(de)}constructor(e,i){var t=this;if($(this,"viewIndexes",[o.days,o.months,o.years]),$(this,"next",()=>{let{year:a,month:n}=this.parsedViewDate;switch(this.currentView){case o.days:this.setViewDate(new Date(a,n+1,1));break;case o.months:this.setViewDate(new Date(a+1,n,1));break;case o.years:this.setViewDate(new Date(a+10,0,1))}}),$(this,"prev",()=>{let{year:a,month:n}=this.parsedViewDate;switch(this.currentView){case o.days:this.setViewDate(new Date(a,n-1,1));break;case o.months:this.setViewDate(new Date(a-1,n,1));break;case o.years:this.setViewDate(new Date(a-10,0,1))}}),$(this,"_finishHide",()=>{this.hideAnimation=!1,this._destroyComponents(),this.$container.removeChild(this.$datepicker)}),$(this,"setPosition",function(a){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(typeof(a=a||t.opts.position)=="function")return void(t.customHide=a({$datepicker:t.$datepicker,$target:t.$el,$pointer:t.$pointer,isViewChange:n,done:t._finishHide}));let l,p,{isMobile:g}=t.opts,u=t.$el.getBoundingClientRect(),v=t.$el.getBoundingClientRect(),I=t.$datepicker.offsetParent,B=t.$el.offsetParent,z=t.$datepicker.getBoundingClientRect(),G=a.split(" "),le=window.scrollY,ie=window.scrollX,ae=t.opts.offset,re=G[0],be=G[1];if(g)t.$datepicker.style.cssText="left: 50%; top: 50%";else{if(I===B&&I!==document.body&&(v={top:t.$el.offsetTop,left:t.$el.offsetLeft,width:u.width,height:t.$el.offsetHeight},le=0,ie=0),I!==B&&I!==document.body){let he=I.getBoundingClientRect();v={top:u.top-he.top,left:u.left-he.left,width:u.width,height:u.height},le=0,ie=0}switch(re){case"top":l=v.top-z.height-ae;break;case"right":p=v.left+v.width+ae;break;case"bottom":l=v.top+v.height+ae;break;case"left":p=v.left-z.width-ae}switch(be){case"top":l=v.top;break;case"right":p=v.left+v.width-z.width;break;case"bottom":l=v.top+v.height-z.height;break;case"left":p=v.left;break;case"center":/left|right/.test(re)?l=v.top+v.height/2-z.height/2:p=v.left+v.width/2-z.width/2}t.$datepicker.style.cssText=`left: ${p+ie}px; top: ${l+le}px`}}),$(this,"_setInputValue",()=>{let{opts:a,$altField:n,locale:{dateFormat:l}}=this,{altFieldDateFormat:p,altField:g}=a;g&&n&&(n.value=this._getInputValue(p)),this.$el.value=this._getInputValue(l),this.$el.dispatchEvent(new Event("change"))}),$(this,"_getInputValue",a=>{let{selectedDates:n,opts:l}=this,{multipleDates:p,multipleDatesSeparator:g}=l;if(!n.length)return"";let u=typeof a=="function",v=u?a(p?n:n[0]):n.map(I=>this.formatDate(I,a));return v=u?v:v.join(g),v}),$(this,"_checkIfDateIsSelected",function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o.days,l=!1;return t.selectedDates.some(p=>{let g=x(a,p,n);return l=g&&p,g}),l}),$(this,"_scheduleCallAfterTransition",a=>{this._cancelScheduledCall(),a&&a(!1),this._onTransitionEnd=()=>{a&&a(!0)},this.$datepicker.addEventListener("transitionend",this._onTransitionEnd,{once:!0})}),$(this,"_cancelScheduledCall",()=>{this.$datepicker.removeEventListener("transitionend",this._onTransitionEnd)}),$(this,"setViewDate",a=>{if(!((a=S(a))instanceof Date)||x(a,this.viewDate))return;let n=this.viewDate;this.viewDate=a;let{onChangeViewDate:l}=this.opts;if(l){let{month:p,year:g}=this.parsedViewDate;l({month:p,year:g,decade:this.curDecade})}this.trigger(o.eventChangeViewDate,a,n)}),$(this,"setFocusDate",function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!a||(a=S(a))instanceof Date)&&(t.focusDate=a,t.trigger(o.eventChangeFocusDate,a,n))}),$(this,"setCurrentView",function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.viewIndexes.includes(a)){if(t.currentView=a,t.elIsInput&&t.visible&&t.setPosition(void 0,!0),t.trigger(o.eventChangeCurrentView,a),!t.views[a]){let l=t.views[a]=new J({dp:t,opts:t.opts,type:a});t.shouldUpdateDOM&&t.$content.appendChild(l.$el)}t.opts.onChangeView&&!n.silent&&t.opts.onChangeView(a)}}),$(this,"_updateLastSelectedDate",a=>{this.lastSelectedDate=a,this.trigger(o.eventChangeLastSelectedDate,a)}),$(this,"destroy",()=>{if(this.isDestroyed)return;let{showEvent:a,isMobile:n}=this.opts,l=this.$datepicker.parentNode;l&&l.removeChild(this.$datepicker),this.$el.removeEventListener(a,this._onFocus),this.$el.removeEventListener("blur",this._onBlur),window.removeEventListener("resize",this._onResize),n&&this._removeMobileAttributes(),this.keyboardNav&&this.keyboardNav.destroy(),this.views=null,this.nav=null,this.$datepicker=null,this.opts={},this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDates=[],this.rangeDateFrom=null,this.rangeDateTo=null,this.isDestroyed=!0}),$(this,"update",function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=j({},t.opts),{silent:p}=n;j(t.opts,a);let{timepicker:g,buttons:u,range:v,selectedDates:I,isMobile:B}=t.opts,z=t.visible||t.treatAsInline;t._createMinMaxDates(),t._limitViewDateByMaxMinDates(),t._handleLocale(),I&&(t.selectedDates=[],t.selectDate(I,{silent:p})),a.view&&t.setCurrentView(a.view,{silent:p}),t._setInputValue(),l.range&&!v?(t.rangeDateTo=!1,t.rangeDateFrom=!1):!l.range&&v&&t.selectedDates.length&&(t.rangeDateFrom=t.selectedDates[0],t.rangeDateTo=t.selectedDates[1]),l.timepicker&&!g?(z&&t.timepicker.destroy(),t.timepicker=!1,t.$timepicker.parentNode.removeChild(t.$timepicker)):!l.timepicker&&g&&t._addTimepicker(),!l.buttons&&u?t._addButtons():l.buttons&&!u?(t.buttons.destroy(),t.$buttons.parentNode.removeChild(t.$buttons)):z&&l.buttons&&u&&t.buttons.clearHtml().render(),!l.isMobile&&B?(t.treatAsInline||W||t._createMobileOverlay(),t._addMobileAttributes(),t.visible&&t._showMobileOverlay()):l.isMobile&&!B&&(t._removeMobileAttributes(),t.visible&&(W.classList.remove("-active-"),typeof t.opts.position!="function"&&t.setPosition())),z&&(t.nav.update(),t.views[t.currentView].render(),t.currentView===o.days&&t.views[t.currentView].renderDayNames())}),$(this,"disableDate",(a,n)=>{(Array.isArray(a)?a:[a]).forEach(l=>{let p=S(l);if(!p)return;let g=n?"delete":"add";this.disabledDates[g](this.formatDate(p,"yyyy-MM-dd"));let u=this.getCell(p,this.currentViewSingular);u&&u.adpCell.render()},[])}),$(this,"enableDate",a=>{this.disableDate(a,!0)}),$(this,"isDateDisabled",a=>{let n=S(a);return this.disabledDates.has(this.formatDate(n,"yyyy-MM-dd"))}),$(this,"isOtherMonth",a=>{let{month:n}=M(a);return n!==this.parsedViewDate.month}),$(this,"isOtherYear",a=>{let{year:n}=M(a);return n!==this.parsedViewDate.year}),$(this,"isOtherDecade",a=>{let{year:n}=M(a),[l,p]=F(this.viewDate);return n<l||n>p}),$(this,"_onChangeSelectedDate",a=>{let{silent:n}=a;setTimeout(()=>{this._setInputValue(),this.opts.onSelect&&!n&&this._triggerOnSelect()})}),$(this,"_onChangeFocusedDate",function(a){let{viewDateTransition:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!a)return;let l=!1;n&&(l=t.isOtherMonth(a)||t.isOtherYear(a)||t.isOtherDecade(a)),l&&t.setViewDate(a),t.opts.onFocus&&t.opts.onFocus({datepicker:t,date:a})}),$(this,"_onChangeTime",a=>{let{hours:n,minutes:l}=a,p=new Date,{lastSelectedDate:g,opts:{onSelect:u}}=this,v=g;g||(v=p);let I=this.getCell(v,this.currentViewSingular),B=I&&I.adpCell;B&&B.isDisabled||(v.setHours(n),v.setMinutes(l),g?(this._setInputValue(),u&&this._triggerOnSelect()):this.selectDate(v))}),$(this,"_onFocus",a=>{this.visible||this.show()}),$(this,"_onBlur",a=>{this.inFocus||!this.visible||this.opts.isMobile||this.hide()}),$(this,"_onMouseDown",a=>{this.inFocus=!0}),$(this,"_onMouseUp",a=>{this.inFocus=!1,this.$el.focus()}),$(this,"_onResize",()=>{this.visible&&typeof this.opts.position!="function"&&this.setPosition()}),$(this,"_onClickOverlay",()=>{this.visible&&this.hide()}),$(this,"getViewDates",function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o.days;return J.getDatesFunction(a)(t)}),$(this,"isWeekend",a=>this.opts.weekends.includes(a)),$(this,"getClampedDate",a=>{let{minDate:n,maxDate:l}=this,p=a;return l&&R(a,l)?p=l:n&&q(a,n)&&(p=n),p}),this.$el=h(e),!this.$el)return;this.$datepicker=k({className:"air-datepicker"}),this.opts=j({},m,i),this.$customContainer=!!this.opts.container&&h(this.opts.container),this.$altField=h(this.opts.altField||!1);let{view:s,startDate:r}=this.opts;r||(this.opts.startDate=new Date),this.$el.nodeName==="INPUT"&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=S(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute("readonly"),this.customHide=!1,this.currentView=s,this.selectedDates=[],this.disabledDates=new Set,this.isDestroyed=!1,this.views={},this.keys=[],this.rangeDateFrom="",this.rangeDateTo="",this.timepickerIsActive=!1,this.treatAsInline=this.opts.inline||!this.elIsInput,this.init()}init(){let{opts:e,treatAsInline:i,opts:{inline:t,isMobile:s,selectedDates:r,keyboardNav:a,onlyTimepicker:n}}=this,l=h("body");(!ye||ye&&de&&!l.contains(de))&&!t&&this.elIsInput&&!this.$customContainer&&X.buildGlobalContainer(X.defaultGlobalContainerId),!s||W||i||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(t||this._bindEvents(),a&&!n&&(this.keyboardNav=new ze({dp:this,opts:e}))),r&&this.selectDate(r,{silent:!0}),this.opts.visible&&!i&&this.show(),s&&!i&&this.$el.setAttribute("readonly",!0),i&&this._createComponents()}_createMobileOverlay(){W=k({className:"air-datepicker-overlay"}),de.appendChild(W)}_createComponents(){let{opts:e,treatAsInline:i,opts:{inline:t,buttons:s,timepicker:r,position:a,classes:n,onlyTimepicker:l,isMobile:p}}=this;this._buildBaseHtml(),this.elIsInput&&(t||this._setPositionClasses(a)),!t&&this.elIsInput||this.$datepicker.classList.add("-inline-"),n&&this.$datepicker.classList.add(...n.split(" ")),l&&this.$datepicker.classList.add("-only-timepicker-"),p&&!i&&this._addMobileAttributes(),this.views[this.currentView]=new J({dp:this,type:this.currentView,opts:e}),this.nav=new ee({dp:this,opts:e}),r&&this._addTimepicker(),s&&this._addButtons(),this.$content.appendChild(this.views[this.currentView].$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){for(let e in this.views)this.views[e].destroy();this.views={},this.nav.destroy(),this.timepicker&&this.timepicker.destroy()}_addMobileAttributes(){W.addEventListener("click",this._onClickOverlay),this.$datepicker.classList.add("-is-mobile-"),this.$el.setAttribute("readonly",!0)}_removeMobileAttributes(){W.removeEventListener("click",this._onClickOverlay),this.$datepicker.classList.remove("-is-mobile-"),this.initialReadonly||this.initialReadonly===""||this.$el.removeAttribute("readonly")}_createMinMaxDates(){let{minDate:e,maxDate:i}=this.opts;this.minDate=!!e&&S(e),this.maxDate=!!i&&S(i)}_addTimepicker(){this.$timepicker=k({className:"air-datepicker--time"}),this.$datepicker.appendChild(this.$timepicker),this.timepicker=new ne({dp:this,opts:this.opts}),this.$timepicker.appendChild(this.timepicker.$el)}_addButtons(){this.$buttons=k({className:"air-datepicker--buttons"}),this.$datepicker.appendChild(this.$buttons),this.buttons=new oe({dp:this,opts:this.opts}),this.$buttons.appendChild(this.buttons.$el)}_bindSubEvents(){this.on(o.eventChangeSelectedDate,this._onChangeSelectedDate),this.on(o.eventChangeFocusDate,this._onChangeFocusedDate),this.on(o.eventChangeTime,this._onChangeTime)}_buildBaseHtml(){let{inline:e}=this.opts;var i,t;this.elIsInput?e?(i=this.$datepicker,(t=this.$el).parentNode.insertBefore(i,t.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class="air-datepicker--pointer"></i><div class="air-datepicker--navigation"></div><div class="air-datepicker--content"></div>',this.$content=h(".air-datepicker--content",this.$datepicker),this.$pointer=h(".air-datepicker--pointer",this.$datepicker),this.$nav=h(".air-datepicker--navigation",this.$datepicker)}_handleLocale(){let{locale:e,dateFormat:i,firstDay:t,timepicker:s,onlyTimepicker:r,timeFormat:a,dateTimeSeparator:n}=this.opts;var l;this.locale=(l=e,JSON.parse(JSON.stringify(l))),i&&(this.locale.dateFormat=i),a!==void 0&&a!==""&&(this.locale.timeFormat=a);let{timeFormat:p}=this.locale;if(t!==""&&(this.locale.firstDay=t),s&&typeof i!="function"){let g=p?n:"";this.locale.dateFormat=[this.locale.dateFormat,p||""].join(g)}r&&typeof i!="function"&&(this.locale.dateFormat=this.locale.timeFormat)}_setPositionClasses(e){if(typeof e=="function")return void this.$datepicker.classList.add("-custom-position-");let i=(e=e.split(" "))[0],t=`air-datepicker -${i}-${e[1]}- -from-${i}-`;this.$datepicker.classList.add(...t.split(" "))}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener("blur",this._onBlur),this.$datepicker.addEventListener("mousedown",this._onMouseDown),this.$datepicker.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}_limitViewDateByMaxMinDates(){let{viewDate:e,minDate:i,maxDate:t}=this;t&&R(e,t)&&this.setViewDate(t),i&&q(e,i)&&this.setViewDate(i)}formatDate(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.viewDate,i=arguments.length>1?arguments[1]:void 0;if(e=S(e),!(e instanceof Date))return;let t=i,s=this.locale,r=M(e),a=r.dayPeriod,n=F(e),l=X.replacer,p={T:e.getTime(),m:r.minutes,mm:r.fullMinutes,h:r.hours12,hh:r.fullHours12,H:r.hours,HH:r.fullHours,aa:a,AA:a.toUpperCase(),E:s.daysShort[r.day],EEEE:s.days[r.day],d:r.date,dd:r.fullDate,M:r.month+1,MM:r.fullMonth,MMM:s.monthsShort[r.month],MMMM:s.months[r.month],yy:r.year.toString().slice(-2),yyyy:r.year,yyyy1:n[0],yyyy2:n[1]};for(let[g,u]of Object.entries(p))t=l(t,f(g),u);return t}down(e){this._handleUpDownActions(e,"down")}up(e){this._handleUpDownActions(e,"up")}selectDate(e){let i,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{currentView:s,parsedViewDate:r,selectedDates:a}=this,{updateTime:n,silent:l}=t,{moveToOtherMonthsOnSelect:p,moveToOtherYearsOnSelect:g,multipleDates:u,range:v,autoClose:I,onBeforeSelect:B}=this.opts,z=a.length;if(Array.isArray(e))return e.forEach(G=>{this.selectDate(G,t)}),new Promise(G=>{setTimeout(G)});if((e=S(e))instanceof Date){if(B&&!l&&!B({date:e,datepicker:this}))return Promise.resolve();if(s===o.days&&e.getMonth()!==r.month&&p&&(i=new Date(e.getFullYear(),e.getMonth(),1)),s===o.years&&e.getFullYear()!==r.year&&g&&(i=new Date(e.getFullYear(),0,1)),i&&this.setViewDate(i),u&&!v){if(z===u)return;this._checkIfDateIsSelected(e)||a.push(e)}else if(v)switch(z){case 1:a.push(e),this.rangeDateTo||(this.rangeDateTo=e),R(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=e),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[e],this.rangeDateFrom=e,this.rangeDateTo="";break;default:this.selectedDates=[e],this.rangeDateFrom=e}else this.selectedDates=[e];return this.trigger(o.eventChangeSelectedDate,{action:o.actionSelectDate,silent:t?.silent,date:e,updateTime:n}),this._updateLastSelectedDate(e),I&&!this.timepickerIsActive&&this.visible&&(u||v?v&&z===1&&this.hide():this.hide()),new Promise(G=>{setTimeout(G)})}}unselectDate(e){let i=this.selectedDates,t=this;if((e=S(e))instanceof Date)return i.some((s,r)=>{if(x(s,e))return i.splice(r,1),t.selectedDates.length?(t.rangeDateTo="",t.rangeDateFrom=i[0],t._updateLastSelectedDate(t.selectedDates[t.selectedDates.length-1])):(t.rangeDateFrom="",t.rangeDateTo="",t._updateLastSelectedDate(!1)),this.trigger(o.eventChangeSelectedDate,{action:o.actionUnselectDate,date:e}),!0})}replaceDate(e,i){let t=this.selectedDates.find(r=>x(r,e,this.currentView)),s=this.selectedDates.indexOf(t);s<0||x(this.selectedDates[s],i,this.currentView)||(this.selectedDates[s]=i,this.trigger(o.eventChangeSelectedDate,{action:o.actionSelectDate,date:i,updateTime:!0}),this._updateLastSelectedDate(i))}clear(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.selectedDates=[],this.rangeDateFrom=!1,this.rangeDateTo=!1,this.lastSelectedDate=!1,this.trigger(o.eventChangeSelectedDate,{action:o.actionUnselectDate,silent:e.silent}),new Promise(i=>{setTimeout(i)})}show(){let{onShow:e,isMobile:i}=this.opts;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add("-active-"),this.visible=!0,e&&this._scheduleCallAfterTransition(e),i&&this._showMobileOverlay()}hide(){let{onHide:e,isMobile:i}=this.opts,t=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove("-active-"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition(s=>{!this.customHide&&(s&&t||!s&&!t)&&this._finishHide(),e&&e(s)}),i&&W.classList.remove("-active-")}_triggerOnSelect(){let e=[],i=[],{selectedDates:t,locale:s,opts:{onSelect:r,multipleDates:a,range:n}}=this,l=a||n,p=typeof s.dateFormat=="function";t.length&&(e=t.map(Q),i=p?a?s.dateFormat(e):e.map(g=>s.dateFormat(g)):e.map(g=>this.formatDate(g,s.dateFormat))),r({date:l?e:e[0],formattedDate:l?i:i[0],datepicker:this})}_handleAlreadySelectedDates(e,i){let{selectedDates:t,rangeDateFrom:s,rangeDateTo:r}=this,{range:a,toggleSelected:n}=this.opts,l=t.length,p=typeof n=="function"?n({datepicker:this,date:i}):n,g=!!(a&&l===1&&e),u=g?Q(i):i;a&&!p&&(l!==2&&this.selectDate(u),l===2&&x(s,r))||(p?this.unselectDate(u):this._updateLastSelectedDate(g?u:e))}_handleUpDownActions(e,i){if(!((e=S(e||this.focusDate||this.viewDate))instanceof Date))return;let t=i==="up"?this.viewIndex+1:this.viewIndex-1;t>2&&(t=2),t<0&&(t=0),this.setViewDate(new Date(e.getFullYear(),e.getMonth(),1)),this.setCurrentView(this.viewIndexes[t])}getCell(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o.day;if(!((e=S(e))instanceof Date))return;let{year:t,month:s,date:r}=M(e),a=`[data-year="${t}"]`,n=`[data-month="${s}"]`,l={[o.day]:`${a}${n}[data-date="${r}"]`,[o.month]:`${a}${n}`,[o.year]:`${a}`};return this.views[this.currentView]?this.views[this.currentView].$el.querySelector(l[i]):void 0}_showMobileOverlay(){W.classList.add("-active-")}_hasTransition(){return window.getComputedStyle(this.$datepicker).getPropertyValue("transition-duration").split(", ").reduce((e,i)=>parseFloat(i)+e,0)>0}get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return M(this.viewDate)}get currentViewSingular(){return this.currentView.slice(0,-1)}get curDecade(){return F(this.viewDate)}get viewIndex(){return this.viewIndexes.indexOf(this.currentView)}get isFinalView(){return this.currentView===o.years}get hasSelectedDates(){return this.selectedDates.length>0}get isMinViewReached(){return this.currentView===this.opts.minView||this.currentView===o.days}get $container(){return this.$customContainer||de}static replacer(e,i,t){return e.replace(i,function(s,r,a,n){return r+t+n})}}var Ce;return $(X,"defaults",m),$(X,"version","3.6.0"),$(X,"defaultGlobalContainerId","air-datepicker-global-container"),Ce=X.prototype,Object.assign(Ce,Re),c.default}()})});var Te=pe(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.default=void 0;var We={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",dateFormat:"MM/dd/yyyy",timeFormat:"hh:mm aa",firstDay:0};me.default=We});var Ae=pe(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.default=void 0;var Xe={days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],daysShort:["zo","ma","di","wo","do","vr","za"],daysMin:["zo","ma","di","wo","do","vr","za"],months:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],monthsShort:["Jan","Feb","Mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],today:"Vandaag",clear:"Legen",dateFormat:"dd-MM-yyyy",timeFormat:"HH:mm",firstDay:0};ge.default=Xe});var Ee=pe(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.default=void 0;var Qe={days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],daysShort:["Son","Mon","Die","Mit","Don","Fre","Sam"],daysMin:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","M\xE4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthsShort:["Jan","Feb","M\xE4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],today:"Heute",clear:"L\xF6schen",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1};ve.default=Qe});var He=ue(_e(),1),Me=ue(Te(),1),Ne=ue(Ae(),1),Pe=ue(Ee(),1);var Ze=!1,et="AIzaSyA3LzIwr4sbLguFgF02W7QguXG1Y2wv7fQ",tt="places",it="beta",at=2,Ie=300,rt="dd-MM-yyyy";var st=0,ot=3650,D={module:"cargo-module",originInput:"cargo-origin",destinationInput:"cargo-destination",cargoTypeSelect:"cargo-type",cargoTypeDisplay:"cargo-type-display",dateInput:"cargo-date",seaCheckbox:"cargo-option-sea",airCheckbox:"cargo-option-air",trainCheckbox:"cargo-option-train",submitButton:"cargo_submit",dropdown:"dropdown",dropdownLink:"dropdown-link",dropdownCity:"city",dropdownCountry:"country",errorElement:"cargo-field-error",inputField:"cargo-input-field",cargoField:"cargo-field",dateContainer:"cargo-date-container"},De=[{attr:D.seaCheckbox,value:"sea"},{attr:D.airCheckbox,value:"air"},{attr:D.trainCheckbox,value:"rail"}],Fe={excludeFromUrl:["other lcl","lcl"],emptyValue:["other fcl","fcl"]},nt="/inquiry",Le=200,dt=50,Z={focusedBackground:"#f5f5f5",defaultBackground:"white"},Oe={locationSuggestions:"Location suggestions",cargoTypeOptions:"Cargo type options"},we={error:"is-error"};function b(...w){Ze&&console.log("[TEST MODE]",...w)}function lt(){return new Promise((w,c)=>{if(window.google&&window.google.maps&&window.google.maps.places){b("Google Maps API already loaded"),w();return}if(document.querySelector('script[src*="maps.googleapis.com"]')){b("Google Maps API script already present, waiting for load...");let m=setInterval(()=>{window.google&&window.google.maps&&window.google.maps.places&&(clearInterval(m),b("Google Maps API loaded"),w())},100);return}b("Loading Google Maps API script...");let o=document.createElement("script");o.src=`https://maps.googleapis.com/maps/api/js?key=${et}&libraries=${tt}&v=${it}`,o.async=!0,o.defer=!0,o.onload=()=>{b("Google Maps API script loaded successfully"),w()},o.onerror=()=>{console.error("Failed to load Google Maps API"),c(new Error("Failed to load Google Maps API"))},document.head.appendChild(o)})}function ct(w){let c=w.getFullYear(),o=String(w.getMonth()+1).padStart(2,"0"),m=String(w.getDate()).padStart(2,"0");return`${c}-${o}-${m}`}function ht(){let w=document.documentElement.lang||"en",c={nl:Ne.default,de:Pe.default,en:Me.default},o=w.toLowerCase().split("-")[0];return(c[o]||Me.default).default}function Ve(w,c){return`${c}_${w}_${Date.now()}`}var $e=!1,fe=!1,Se=class{constructor(c,o){this.module=c,this.moduleIndex=o,this.selectedDateISO="",this.originResults=[],this.destinationResults=[],this.eventHandlers=[],this.elements=this.findElements(),this.validateElements()?this.init():console.error(`Module ${o}: Missing required elements`)}findElements(){let c=h=>this.module.querySelector(`[data-${h}]`),o=h=>this.module.querySelectorAll(`[data-${h}]`),m=h=>this.module.querySelector(`[data-button-click="${h}"]`);return{originInput:c(D.originInput),destinationInput:c(D.destinationInput),cargoTypeSelect:c(D.cargoTypeSelect),cargoTypeDisplay:c(D.cargoTypeDisplay),dateInput:c(D.dateInput),seaCheckbox:c(D.seaCheckbox),airCheckbox:c(D.airCheckbox),trainCheckbox:c(D.trainCheckbox),submitButton:m(D.submitButton),inputFields:o(D.inputField),errorElements:o(D.errorElement)}}validateElements(){return["originInput","destinationInput","cargoTypeSelect","cargoTypeDisplay","dateInput","submitButton"].every(o=>this.elements[o])}init(){b(`Module ${this.moduleIndex}: Initializing`),this.clearAllErrors(),this.initDatePicker(),this.initAutocomplete(),this.initCargoTypeDropdown(),this.initTransportModeListeners(),this.initSubmitHandler(),b(`Module ${this.moduleIndex}: Initialized successfully`)}addEventHandler(c,o,m,h){c.addEventListener(o,m,h),this.eventHandlers.push({element:c,event:o,handler:m,options:h})}cleanup(){this.eventHandlers.forEach(({element:c,event:o,handler:m,options:h})=>{c.removeEventListener(o,m,h)}),this.eventHandlers=[],b(`Module ${this.moduleIndex}: Cleaned up`)}clearAllErrors(){this.elements.inputFields.forEach(c=>{c.classList.remove(we.error)}),this.elements.errorElements.forEach(c=>{c.style.display="none"}),b(`Module ${this.moduleIndex}: Error states cleared`)}showError(c){if(!c)return;c.classList.add(we.error);let m=c.closest(".cargo_field")?.querySelector(`[data-${D.errorElement}]`);m&&(m.style.display="block")}clearError(c){if(!c)return;c.classList.remove(we.error);let m=c.closest(".cargo_field")?.querySelector(`[data-${D.errorElement}]`);m&&(m.style.display="none")}initDatePicker(){let c=this.elements.dateInput;c.readOnly=!0,c.style.cursor="pointer";let o=c.closest(`[data-${D.dateContainer}]`)||c.closest(".cargo_field"),m=ht();new He.default(c,{locale:m,firstDay:1,dateFormat:rt,minDate:new Date(Date.now()+st*24*60*60*1e3),maxDate:new Date(Date.now()+ot*24*60*60*1e3),toggleSelected:!1,container:o,autoClose:!0,minView:"days",position:"bottom right",onSelect:({date:h,formattedDate:k})=>{h&&(this.selectedDateISO=ct(h),b(`Module ${this.moduleIndex}: Date selected:`,k,"(ISO:",this.selectedDateISO+")")),this.clearError(c)}}),b(`Module ${this.moduleIndex}: Date picker initialized`)}initAutocomplete(){let c=this.elements.originInput.closest(".cargo_input-field-wrap"),o=this.elements.destinationInput.closest(".cargo_input-field-wrap"),m=c?.parentElement.querySelector(`[data-${D.dropdown}]`),h=o?.parentElement.querySelector(`[data-${D.dropdown}]`);this.validateOrigin=this.createAutocomplete(this.elements.originInput,this.originResults,m,"origin"),this.validateDestination=this.createAutocomplete(this.elements.destinationInput,this.destinationResults,h,"destination"),b(`Module ${this.moduleIndex}: Autocomplete initialized`)}createAutocomplete(c,o,m,h){if(!c||!m)return console.error(`Module ${this.moduleIndex}: Input or dropdown not found for ${h}`),null;let k=null,L=null,E=!1,M=!1,C=-1,_=m.querySelector(`[data-${D.dropdownLink}]`);if(!_)return console.error(`Module ${this.moduleIndex}: Template not found for ${h}`),null;let F=Ve(this.moduleIndex,`${h}_dropdown`);m.id=F,m.setAttribute("role","listbox"),m.setAttribute("aria-label",Oe.locationSuggestions),c.setAttribute("role","combobox"),c.setAttribute("aria-autocomplete","list"),c.setAttribute("aria-controls",F),c.setAttribute("aria-expanded","false"),m.style.display="none";let P=()=>{m.style.display="block",c.setAttribute("aria-expanded","true"),C=-1,b(`Module ${this.moduleIndex}: ${h} dropdown opened`)},x=()=>{m.style.display="none",c.setAttribute("aria-expanded","false"),C=-1,b(`Module ${this.moduleIndex}: ${h} dropdown closed`)},R=()=>{let f=c.value.trim(),T=M||o.some(H=>H.combination===f);return!T&&f.length>0?(this.showError(c),b(`Module ${this.moduleIndex}: ${h} validation failed`)):(this.clearError(c),b(`Module ${this.moduleIndex}: ${h} validation passed`)),T},q=f=>{let T=m.querySelectorAll(`[data-${D.dropdownLink}]:not([style*="display: none"])`);T.forEach(H=>{H.style.backgroundColor=Z.defaultBackground,H.setAttribute("aria-selected","false")}),f>=0&&f<T.length?(C=f,T[f].style.backgroundColor=Z.focusedBackground,T[f].setAttribute("aria-selected","true"),T[f].scrollIntoView({block:"nearest"}),c.setAttribute("aria-activedescendant",T[f].id)):(C=-1,c.removeAttribute("aria-activedescendant"))},Q=async f=>{if(!E){E=!0,b(`Module ${this.moduleIndex}: ${h} searching for:`,f),k||(k=new google.maps.places.AutocompleteSessionToken);try{let H=(await google.maps.places.AutocompleteSuggestion.fetchAutocompleteSuggestions({input:f,sessionToken:k})).suggestions;if(!H||H.length===0){E=!1,x(),b(`Module ${this.moduleIndex}: ${h} no suggestions found`);return}let V=H.map(U=>U.placePrediction.toPlace().fetchFields({fields:["addressComponents"]})),se=await Promise.all(V);o.length=0;let K=new Set;se.forEach(U=>{let ee=U.place,Y=null,oe=null;if(ee.addressComponents&&ee.addressComponents.forEach(N=>{let ne=N.types;(ne.includes("locality")||!Y&&ne.includes("postal_town")||!Y&&ne.includes("administrative_area_level_2"))&&(Y=N.longText),ne.includes("country")&&(oe=N.longText)}),Y&&oe){let N=`${Y}, ${oe}`;K.has(N)||(K.add(N),o.push({city:Y,country:oe,combination:N}))}}),m.querySelectorAll(`[data-${D.dropdownLink}]`).forEach((U,ee)=>{ee>0&&U.remove()}),this.displayResults(m,_,o,c,P,x,F),b(`Module ${this.moduleIndex}: ${h} found`,o.length,"results"),k=new google.maps.places.AutocompleteSessionToken,E=!1}catch(T){console.error(`Module ${this.moduleIndex}: Error fetching place details:`,T),E=!1,x()}}},y=async function(){if(this.select(),!$e&&!fe){fe=!0;try{await lt(),$e=!0,fe=!1}catch(f){console.error("Failed to load Google Maps API:",f),fe=!1;return}}o.length>0&&P()};this.addEventHandler(c,"focus",y);let O=()=>{setTimeout(()=>{m.contains(document.activeElement)||x()},Le)};this.addEventHandler(c,"blur",O);let A=f=>{let T=m.style.display==="block",H=m.querySelectorAll(`[data-${D.dropdownLink}]:not([style*="display: none"])`);if((f.key===" "||f.keyCode===32)&&f.stopPropagation(),f.key==="Escape"||f.key==="Tab"){x();return}if(T&&H.length>0){if(f.key==="ArrowDown")f.preventDefault(),q((C+1)%H.length);else if(f.key==="ArrowUp")f.preventDefault(),q(C<=0?H.length-1:C-1);else if(f.key==="Enter"&&C>=0){f.preventDefault();let V=H[C],se=V.querySelector(`[data-${D.dropdownCity}]`)?.textContent,K=V.querySelector(`[data-${D.dropdownCountry}]`)?.textContent;se&&K&&(c.value=`${se}, ${K}`,M=!0,x(),R(),b(`Module ${this.moduleIndex}: ${h} selected via keyboard:`,c.value))}}};this.addEventHandler(c,"keydown",A);let j=()=>{let f=c.value;if(M=!1,this.clearError(c),L&&clearTimeout(L),f.length<at){L=setTimeout(()=>{o.length=0,m.querySelectorAll(`[data-${D.dropdownLink}]`).forEach((H,V)=>{V>0&&H.remove()}),x()},Ie);return}if(!$e){b(`Module ${this.moduleIndex}: ${h} waiting for Google Maps API to load...`);return}L=setTimeout(()=>{Q(f)},Ie)};this.addEventHandler(c,"input",j);let S=f=>{!c.contains(f.target)&&!m.contains(f.target)&&x()};return this.addEventHandler(document,"click",S),R}displayResults(c,o,m,h,k,L,E){if(m.length===0){L();return}o.style.display="none",m.forEach((M,C)=>{let _=o.cloneNode(!0);_.style.display="block",_.setAttribute("role","option"),_.setAttribute("id",`${E}_option_${C}`),_.setAttribute("aria-selected","false"),_.setAttribute("tabindex","-1");let F=_.querySelector(`[data-${D.dropdownCity}]`),P=_.querySelector(`[data-${D.dropdownCountry}]`);F&&(F.textContent=M.city),P&&(P.textContent=M.country),_.addEventListener("mouseenter",()=>{_.style.backgroundColor=Z.focusedBackground}),_.addEventListener("mouseleave",()=>{_.style.backgroundColor=Z.defaultBackground}),_.addEventListener("click",()=>{h.value=M.combination,h.dispatchEvent(new Event("selected-from-dropdown")),L(),this.clearError(h),b(`Module ${this.moduleIndex}: User selected from dropdown:`,M.combination)}),c.appendChild(_)}),k()}initCargoTypeDropdown(){let c=this.elements.cargoTypeSelect,o=this.elements.cargoTypeDisplay,h=o?.closest(".cargo_field")?.querySelector(`[data-${D.dropdown}]`);if(!c||!o||!h)return console.error(`Module ${this.moduleIndex}: Cargo type elements not found`),null;let k=-1;o.readOnly=!0,o.style.cursor="pointer",o.setAttribute("role","combobox"),o.setAttribute("aria-autocomplete","list"),o.setAttribute("aria-expanded","false"),o.placeholder="Select cargo type",c.style.display="none";let L=h.querySelector(`[data-${D.dropdownLink}]`);if(!L)return console.error(`Module ${this.moduleIndex}: Template not found for cargo type`),null;let E=Ve(this.moduleIndex,"cargo_type_dropdown");h.id=E,h.setAttribute("role","listbox"),h.setAttribute("aria-label",Oe.cargoTypeOptions),o.setAttribute("aria-controls",E),h.style.display="none";let M=()=>{h.style.display="block",o.setAttribute("aria-expanded","true"),k=-1,b(`Module ${this.moduleIndex}: Cargo type dropdown opened`),setTimeout(()=>{h.setAttribute("data-just-opened","true")},dt)},C=()=>{h.style.display="none",o.setAttribute("aria-expanded","false"),k=-1,b(`Module ${this.moduleIndex}: Cargo type dropdown closed`)},_=y=>{let O=h.querySelectorAll(`[data-${D.dropdownLink}]:not([style*="display: none"])`);O.forEach(A=>{A.style.backgroundColor=Z.defaultBackground,A.setAttribute("aria-selected","false")}),y>=0&&y<O.length?(k=y,O[y].style.backgroundColor=Z.focusedBackground,O[y].setAttribute("aria-selected","true"),O[y].scrollIntoView({block:"nearest"}),o.setAttribute("aria-activedescendant",O[y].id)):(k=-1,o.removeAttribute("aria-activedescendant"))},F=()=>{let y=o.value.trim().length>0;return y?(this.clearError(o),b(`Module ${this.moduleIndex}: Cargo type validation passed`)):(this.showError(o),b(`Module ${this.moduleIndex}: Cargo type validation failed`)),y};(()=>{h.querySelectorAll(`[data-${D.dropdownLink}]`).forEach((A,j)=>{j>0&&A.remove()}),L.style.display="none",c.querySelectorAll("option").forEach((A,j)=>{let S=L.cloneNode(!0);S.style.display="block",S.setAttribute("role","option"),S.setAttribute("id",`${E}_option_${j}`),S.setAttribute("aria-selected","false"),S.setAttribute("data-value",A.value),S.setAttribute("tabindex","-1");let f=S.querySelector(`[data-${D.dropdownCity}]`),T=S.querySelector(`[data-${D.dropdownCountry}]`);f&&(f.textContent=A.textContent,f.style.marginBottom="0"),T&&(T.style.display="none"),S.addEventListener("mouseenter",()=>{S.style.backgroundColor=Z.focusedBackground}),S.addEventListener("mouseleave",()=>{S.style.backgroundColor=Z.defaultBackground}),S.addEventListener("click",()=>{o.value=A.textContent,c.value=A.value,C(),F(),b(`Module ${this.moduleIndex}: User selected cargo type:`,A.value,"-",A.textContent)}),h.appendChild(S)})})(),b(`Module ${this.moduleIndex}: Cargo type dropdown initialized`);let x=y=>{y.stopPropagation(),h.style.display==="none"?M():C()};this.addEventHandler(o,"click",x);let R=y=>{let O=h.style.display==="block",A=h.querySelectorAll(`[data-${D.dropdownLink}]:not([style*="display: none"])`);if(y.key===" "||y.keyCode===32){y.preventDefault(),y.stopPropagation(),O?C():M();return}if(y.key==="Escape"||y.key==="Tab"){C();return}if(O&&A.length>0){if(y.key==="ArrowDown")y.preventDefault(),_((k+1)%A.length);else if(y.key==="ArrowUp")y.preventDefault(),_(k<=0?A.length-1:k-1);else if(y.key==="Enter"&&k>=0){y.preventDefault();let j=A[k],S=j.getAttribute("data-value"),f=j.querySelector(`[data-${D.dropdownCity}]`)?.textContent;S&&f&&(o.value=f,c.value=S,C(),F(),b(`Module ${this.moduleIndex}: User selected cargo type via keyboard:`,S,"-",f))}}};this.addEventHandler(o,"keydown",R);let q=()=>{setTimeout(C,Le)};this.addEventHandler(o,"blur",q);let Q=y=>{if(h.getAttribute("data-just-opened")==="true"){h.removeAttribute("data-just-opened");return}!o.contains(y.target)&&!h.contains(y.target)&&C()};this.addEventHandler(document,"click",Q),this.validateCargoType=F}getTransportModes(){return De.filter(c=>this.module.querySelector(`[data-${c.attr}]`)?.checked).map(c=>c.value)}validateTransportModes(){let o=this.getTransportModes().length>0,m=this.module.querySelector(`[data-${De[0].attr}]`);if(m){let h=m.closest(".rate_bottom-row")||m.closest(".cargo_field");if(h){let k=h.querySelector(`[data-${D.errorElement}]`);k&&(k.style.display=o?"none":"block")}}return b(`Module ${this.moduleIndex}:`,o?"Transport mode validation passed":"Transport mode validation failed"),o}initTransportModeListeners(){De.forEach(c=>{let o=this.module.querySelector(`[data-${c.attr}]`);if(o){let m=()=>{b(`Module ${this.moduleIndex}: Transport modes changed:`,this.getTransportModes())};this.addEventHandler(o,"change",m)}})}initSubmitHandler(){let c=this.elements.submitButton;if(!c){console.error(`Module ${this.moduleIndex}: Submit button not found`);return}let o=m=>this.handleSubmit(m);this.addEventHandler(c,"click",o),b(`Module ${this.moduleIndex}: Submit button listener attached`)}handleSubmit(c){c.preventDefault(),b(`Module ${this.moduleIndex}: User clicked submit button`);let o=this.elements.originInput?.value||"",m=this.elements.destinationInput?.value||"",h=this.elements.cargoTypeSelect?.value||"",k=this.selectedDateISO||"",L=this.getTransportModes(),E=!0;if(this.validateOrigin&&!this.validateOrigin()?(this.showError(this.elements.originInput),E=!1):o||(this.showError(this.elements.originInput),E=!1),this.validateDestination&&!this.validateDestination()?(this.showError(this.elements.destinationInput),E=!1):m||(this.showError(this.elements.destinationInput),E=!1),this.validateCargoType&&!this.validateCargoType()?E=!1:h||(this.showError(this.elements.cargoTypeDisplay),E=!1),k||(this.showError(this.elements.dateInput),E=!1),this.validateTransportModes()||(E=!1),!E){b(`Module ${this.moduleIndex}: Form validation failed:`,{origin:o||"MISSING",destination:m||"MISSING",containerType:h||"MISSING",transportDate:k||"MISSING",transportModes:L.length>0?L:"MISSING"});return}b(`Module ${this.moduleIndex}: Form validation passed`);let M=this.elements.submitButton.getAttribute("href")||nt,C=new URLSearchParams;C.append("origin",o),C.append("destination",m),C.append("transportDate",k),C.append("transportMode",L.join(","));let _=h.toLowerCase();Fe.excludeFromUrl.includes(_)||(Fe.emptyValue.includes(_)?C.append("containerType",""):C.append("containerType",h));let F=`${M}?${C.toString()}`;b(`Module ${this.moduleIndex}: Final URL constructed:`,F),b(`Module ${this.moduleIndex}: Form data:`,{origin:o,destination:m,containerType:h,transportDate:k,transportModes:L}),b(`Module ${this.moduleIndex}: Redirecting user...`),window.location.href=F}};window.cargoModulesInitialized||(window.cargoModulesInitialized=!0,window.Webflow||(window.Webflow=[]),window.Webflow.push(()=>{let w=document.querySelectorAll(`[data-${D.module}]`);if(w.length===0){console.warn("No cargo form modules found on page");return}b(`Found ${w.length} cargo form module(s) on page`),w.forEach((c,o)=>{new Se(c,o)}),b("All cargo form modules initialized")}));})();
