(()=>{var Be=Object.create;var xe=Object.defineProperty;var Re=Object.getOwnPropertyDescriptor;var je=Object.getOwnPropertyNames;var Ue=Object.getPrototypeOf,qe=Object.prototype.hasOwnProperty;var fe=(b,C)=>()=>(C||b((C={exports:{}}).exports,C),C.exports);var Ge=(b,C,l,Y)=>{if(C&&typeof C=="object"||typeof C=="function")for(let F of je(C))!qe.call(b,F)&&F!==l&&xe(b,F,{get:()=>C[F],enumerable:!(Y=Re(C,F))||Y.enumerable});return b};var ye=(b,C,l)=>(l=b!=null?Be(Ue(b)):{},Ge(C||!b||!b.__esModule?xe(l,"default",{value:b,enumerable:!0}):l,b));var $e=fe((ue,Se)=>{(function(b,C){typeof ue=="object"&&typeof Se=="object"?Se.exports=C():typeof define=="function"&&define.amd?define([],C):typeof ue=="object"?ue.AirDatepicker=C():b.AirDatepicker=C()})(ue,function(){return function(){"use strict";var b={d:function(n,e){for(var i in e)b.o(e,i)&&!b.o(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:e[i]})},o:function(n,e){return Object.prototype.hasOwnProperty.call(n,e)}},C={};b.d(C,{default:function(){return U}});var l={days:"days",months:"months",years:"years",day:"day",month:"month",year:"year",eventChangeViewDate:"changeViewDate",eventChangeCurrentView:"changeCurrentView",eventChangeFocusDate:"changeFocusDate",eventChangeSelectedDate:"changeSelectedDate",eventChangeTime:"changeTime",eventChangeLastSelectedDate:"changeLastSelectedDate",actionSelectDate:"selectDate",actionUnselectDate:"unselectDate",cssClassWeekend:"-weekend-"},Y={classes:"",inline:!1,locale:{days:["\u0412\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435","\u041F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A","\u0412\u0442\u043E\u0440\u043D\u0438\u043A","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041F\u044F\u0442\u043D\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043E\u0442\u0430"],daysShort:["\u0412\u043E\u0441","\u041F\u043E\u043D","\u0412\u0442\u043E","\u0421\u0440\u0435","\u0427\u0435\u0442","\u041F\u044F\u0442","\u0421\u0443\u0431"],daysMin:["\u0412\u0441","\u041F\u043D","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041F\u0442","\u0421\u0431"],months:["\u042F\u043D\u0432\u0430\u0440\u044C","\u0424\u0435\u0432\u0440\u0430\u043B\u044C","\u041C\u0430\u0440\u0442","\u0410\u043F\u0440\u0435\u043B\u044C","\u041C\u0430\u0439","\u0418\u044E\u043D\u044C","\u0418\u044E\u043B\u044C","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u041E\u043A\u0442\u044F\u0431\u0440\u044C","\u041D\u043E\u044F\u0431\u0440\u044C","\u0414\u0435\u043A\u0430\u0431\u0440\u044C"],monthsShort:["\u042F\u043D\u0432","\u0424\u0435\u0432","\u041C\u0430\u0440","\u0410\u043F\u0440","\u041C\u0430\u0439","\u0418\u044E\u043D","\u0418\u044E\u043B","\u0410\u0432\u0433","\u0421\u0435\u043D","\u041E\u043A\u0442","\u041D\u043E\u044F","\u0414\u0435\u043A"],today:"\u0421\u0435\u0433\u043E\u0434\u043D\u044F",clear:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1},startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"T",toggleSelected:!0,keyboardNav:!0,selectedDates:!1,container:"",isMobile:!1,visible:!1,position:"bottom left",offset:12,view:l.days,minView:l.days,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:", ",range:!1,dynamicRange:!0,buttons:!1,monthsField:"monthsShort",showEvent:"focus",autoClose:!1,fixedHeight:!1,prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function F(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return typeof n=="string"?e.querySelector(n):n}function P(){let{tagName:n="div",className:e="",innerHtml:i="",id:t="",attrs:s={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=document.createElement(n);return e&&r.classList.add(...e.split(" ")),t&&(r.id=t),i&&(r.innerHTML=i),s&&Z(r,s),r}function Z(n,e){for(let[i,t]of Object.entries(e))t!==void 0&&n.setAttribute(i,t);return n}function he(n){return new Date(n.getFullYear(),n.getMonth()+1,0).getDate()}function E(n){let e=n.getHours(),{hours:i,dayPeriod:t}=ge(e);return{year:n.getFullYear(),month:n.getMonth(),fullMonth:n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,date:n.getDate(),fullDate:n.getDate()<10?"0"+n.getDate():n.getDate(),day:n.getDay(),hours:e,fullHours:K(e),hours12:i,dayPeriod:t,fullHours12:K(i),minutes:n.getMinutes(),fullMinutes:n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes()}}function ge(n){return{dayPeriod:n>11?"pm":"am",hours:n%12==0?12:n%12}}function K(n){return n<10?"0"+n:n}function X(n){let e=10*Math.floor(n.getFullYear()/10);return[e,e+9]}function z(){let n=[];for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return i.forEach(s=>{if(typeof s=="object")for(let r in s)s[r]&&n.push(r);else s&&n.push(s)}),n.join(" ")}function T(n,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l.days;if(!n||!e)return!1;let t=E(n),s=E(e);return{[l.days]:t.date===s.date&&t.month===s.month&&t.year===s.year,[l.months]:t.month===s.month&&t.year===s.year,[l.years]:t.year===s.year}[i]}function G(n,e,i){let t=oe(n,!1).getTime(),s=oe(e,!1).getTime();return i?t>=s:t>s}function Q(n,e){return!G(n,e,!0)}function oe(n){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=new Date(n.getTime());return typeof e!="boolean"||e||function(t){t.setHours(0,0,0,0)}(i),i}function B(n,e,i){n.length?n.forEach(t=>{t.addEventListener(e,i)}):n.addEventListener(e,i)}function ee(n,e){return!(!n||n===document||n instanceof DocumentFragment)&&(n.matches(e)?n:ee(n.parentNode,e))}function te(n,e,i){return n>i?i:n<e?e:n}function ne(n){for(var e=arguments.length,i=new Array(e>1?e-1:0),t=1;t<e;t++)i[t-1]=arguments[t];return i.filter(s=>s).forEach(s=>{for(let[r,a]of Object.entries(s))if(a!==void 0&&a.toString()==="[object Object]"){let o=n[r]!==void 0?n[r].toString():void 0,d=a.toString(),c=Array.isArray(a)?[]:{};n[r]=n[r]?o!==d?c:n[r]:c,ne(n[r],a)}else n[r]=a}),n}function y(n){let e=n;return n instanceof Date||(typeof n=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(n)&&(n+="T00:00:00"),e=new Date(n)),isNaN(e.getTime())&&(console.log(`Unable to convert value "${n}" to Date object`),e=!1),e}function f(n){let e="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+e+")("+n+")($|<|"+e+")","g")}function M(n,e,i){return(e=function(t){var s=function(r,a){if(typeof r!="object"||r===null)return r;var o=r[Symbol.toPrimitive];if(o!==void 0){var d=o.call(r,"string");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(t);return typeof s=="symbol"?s:String(s)}(e))in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}class v{constructor(){let{type:e,date:i,dp:t,opts:s,body:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};M(this,"focus",()=>{this.$cell.classList.add("-focus-"),this.focused=!0}),M(this,"removeFocus",()=>{this.$cell.classList.remove("-focus-"),this.focused=!1}),M(this,"select",()=>{this.$cell.classList.add("-selected-"),this.selected=!0}),M(this,"removeSelect",()=>{this.$cell.classList.remove("-selected-","-range-from-","-range-to-"),this.selected=!1}),M(this,"onChangeSelectedDate",()=>{this.isDisabled||(this._handleSelectedStatus(),this.opts.range&&this._handleRangeStatus())}),M(this,"onChangeFocusDate",a=>{if(!a)return void(this.focused&&this.removeFocus());let o=T(a,this.date,this.type);o?this.focus():!o&&this.focused&&this.removeFocus(),this.opts.range&&this._handleRangeStatus()}),M(this,"render",()=>(this.$cell.innerHTML=this._getHtml(),this._handleClasses(),this.$cell)),this.type=e,this.singleType=this.type.slice(0,-1),this.date=i,this.dp=t,this.opts=s,this.body=r,this.customData=!1,this.init()}init(){var e,i;let{onRenderCell:t}=this.opts;t&&(this.customData=t({date:this.date,cellType:this.singleType,datepicker:this.dp})),this._createElement(),this._bindDatepickerEvents(),(e=this.customData)!==null&&e!==void 0&&e.disabled?this.dp.disableDate(this.date):((i=this.customData)===null||i===void 0?void 0:i.disabled)===!1&&this.dp.enableDate(this.date)}_bindDatepickerEvents(){this.dp.on(l.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(l.eventChangeFocusDate,this.onChangeFocusDate)}unbindDatepickerEvents(){this.dp.off(l.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(l.eventChangeFocusDate,this.onChangeFocusDate)}_createElement(){var e;let{year:i,month:t,fullMonth:s,date:r,fullDate:a}=E(this.date),o=((e=this.customData)===null||e===void 0?void 0:e.attrs)||{};this.$cell=P({attrs:{"data-year":i,"data-month":t,"data-date":r,"data-iso-date":`${i}-${s}-${a}`,...o}}),this.$cell.adpCell=this}_getClassName(){var e;let i=new Date,{selectOtherMonths:t,selectOtherYears:s}=this.opts,{minDate:r,maxDate:a,isDateDisabled:o}=this.dp,{day:d}=E(this.date),c=this._isOutOfMinMaxRange(),u=o(this.date),h=z("air-datepicker-cell",`-${this.singleType}-`,{"-current-":T(i,this.date,this.type),"-min-date-":r&&T(r,this.date,this.type),"-max-date-":a&&T(a,this.date,this.type)}),m="";switch(this.type){case l.days:m=z({"-weekend-":this.dp.isWeekend(d),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!t||c||u});break;case l.months:m=z({"-disabled-":c});break;case l.years:m=z({"-other-decade-":this.isOtherDecade,"-disabled-":c||this.isOtherDecade&&!s})}return z(h,m,(e=this.customData)===null||e===void 0?void 0:e.classes).split(" ")}_getHtml(){var e;let{year:i,month:t,date:s}=E(this.date),{showOtherMonths:r,showOtherYears:a}=this.opts;if((e=this.customData)!==null&&e!==void 0&&e.html)return this.customData.html;switch(this.type){case l.days:return!r&&this.isOtherMonth?"":s;case l.months:return this.dp.locale[this.opts.monthsField][t];case l.years:return!a&&this.isOtherDecade?"":i}}_isOutOfMinMaxRange(){let{minDate:e,maxDate:i}=this.dp,{type:t,date:s}=this,{month:r,year:a,date:o}=E(s),d=t===l.days,c=t===l.years,u=!!e&&new Date(a,c?e.getMonth():r,d?o:e.getDate()),h=!!i&&new Date(a,c?i.getMonth():r,d?o:i.getDate());return e&&i?Q(u,e)||G(h,i):e?Q(u,e):i?G(h,i):void 0}destroy(){this.unbindDatepickerEvents()}_handleRangeStatus(){let{selectedDates:e,focusDate:i,rangeDateTo:t,rangeDateFrom:s}=this.dp,r=e.length;if(this.$cell.classList.remove("-range-from-","-range-to-","-in-range-"),!r)return;let a=s,o=t;if(r===1&&i){let m=G(i,e[0]);a=m?e[0]:i,o=m?i:e[0]}let d=z({"-in-range-":a&&o&&(c=this.date,u=a,h=o,G(c,u)&&Q(c,h)),"-range-from-":a&&T(this.date,a,this.type),"-range-to-":o&&T(this.date,o,this.type)});var c,u,h;d&&this.$cell.classList.add(...d.split(" "))}_handleSelectedStatus(){let e=this.dp._checkIfDateIsSelected(this.date,this.type);e?this.select():!e&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){T(this.dp.focusDate,this.date,this.type)&&this.focus()}_handleClasses(){this.$cell.setAttribute("class",""),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&(this._handleSelectedStatus(),this.dp.opts.range&&this._handleRangeStatus()),this.$cell.classList.add(...this._getClassName())}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.dp.isOtherMonth(this.date)}get isOtherDecade(){return this.dp.isOtherDecade(this.date)}}function S(n,e,i){return(e=function(t){var s=function(r,a){if(typeof r!="object"||r===null)return r;var o=r[Symbol.toPrimitive];if(o!==void 0){var d=o.call(r,"string");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(t);return typeof s=="symbol"?s:String(s)}(e))in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}let O={[l.days]:`<div class="air-datepicker-body--day-names"></div><div class="air-datepicker-body--cells -${l.days}-"></div>`,[l.months]:`<div class="air-datepicker-body--cells -${l.months}-"></div>`,[l.years]:`<div class="air-datepicker-body--cells -${l.years}-"></div>`},x=".air-datepicker-cell";class I{constructor(e){let{dp:i,type:t,opts:s}=e;S(this,"handleClick",r=>{let a=r.target.closest(x).adpCell;if(a.isDisabled)return;if(!this.dp.isMinViewReached)return void this.dp.down();let o=this.dp._checkIfDateIsSelected(a.date,a.type);o?this.dp._handleAlreadySelectedDates(o,a.date):this.dp.selectDate(a.date)}),S(this,"handleDayNameClick",r=>{let a=r.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(a),datepicker:this.dp})}),S(this,"onChangeCurrentView",r=>{r!==this.type?this.hide():(this.show(),this.render())}),S(this,"onMouseOverCell",r=>{let a=ee(r.target,x);this.dp.setFocusDate(!!a&&a.adpCell.date)}),S(this,"onMouseOutCell",()=>{this.dp.setFocusDate(!1)}),S(this,"onClickBody",r=>{let{onClickDayName:a}=this.opts,o=r.target;o.closest(x)&&this.handleClick(r),a&&o.closest(".air-datepicker-body--day-name")&&this.handleDayNameClick(r)}),S(this,"onMouseDown",r=>{this.pressed=!0;let a=ee(r.target,x),o=a&&a.adpCell;T(o.date,this.dp.rangeDateFrom)&&(this.rangeFromFocused=!0),T(o.date,this.dp.rangeDateTo)&&(this.rangeToFocused=!0)}),S(this,"onMouseMove",r=>{if(!this.pressed||!this.dp.isMinViewReached)return;r.preventDefault();let a=ee(r.target,x),o=a&&a.adpCell,{selectedDates:d,rangeDateTo:c,rangeDateFrom:u}=this.dp;if(!o||o.isDisabled)return;let{date:h}=o;if(d.length===2){if(this.rangeFromFocused&&!G(h,c)){let{hours:m,minutes:L}=E(u);h.setHours(m),h.setMinutes(L),this.dp.rangeDateFrom=h,this.dp.replaceDate(u,h)}if(this.rangeToFocused&&!Q(h,u)){let{hours:m,minutes:L}=E(c);h.setHours(m),h.setMinutes(L),this.dp.rangeDateTo=h,this.dp.replaceDate(c,h)}}}),S(this,"onMouseUp",()=>{this.pressed=!1,this.rangeFromFocused=!1,this.rangeToFocused=!1}),S(this,"onChangeViewDate",(r,a)=>{if(!this.isVisible)return;let o=X(r),d=X(a);switch(this.dp.currentView){case l.days:if(T(r,a,l.months))return;break;case l.months:if(T(r,a,l.years))return;break;case l.years:if(o[0]===d[0]&&o[1]===d[1])return}this.render()}),S(this,"render",()=>{this.destroyCells(),this._generateCells(),this.cells.forEach(r=>{this.$cells.appendChild(r.render())})}),this.dp=i,this.type=t,this.opts=s,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.type===l.days&&this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}_bindEvents(){let{range:e,dynamicRange:i}=this.opts;B(this.$el,"mouseover",this.onMouseOverCell),B(this.$el,"mouseout",this.onMouseOutCell),B(this.$el,"click",this.onClickBody),e&&i&&(B(this.$el,"mousedown",this.onMouseDown),B(this.$el,"mousemove",this.onMouseMove),B(window.document,"mouseup",this.onMouseUp))}_bindDatepickerEvents(){this.dp.on(l.eventChangeViewDate,this.onChangeViewDate),this.dp.on(l.eventChangeCurrentView,this.onChangeCurrentView)}_buildBaseHtml(){this.$el=P({className:`air-datepicker-body -${this.type}-`,innerHtml:O[this.type]}),this.$names=F(".air-datepicker-body--day-names",this.$el),this.$cells=F(".air-datepicker-body--cells",this.$el)}_getDayNamesHtml(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dp.locale.firstDay,i="",t=this.dp.isWeekend,{onClickDayName:s}=this.opts,r=e,a=0;for(;a<7;){let o=r%7;i+=`<div class="${z("air-datepicker-body--day-name",{[l.cssClassWeekend]:t(o),"-clickable-":!!s})}" data-day-index='${o}'>${this.dp.locale.daysMin[o]}</div>`,a++,r++}return i}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCell(e){let{type:i,dp:t,opts:s}=this;return new v({type:i,dp:t,opts:s,date:e,body:this})}_generateCells(){I.getDatesFunction(this.type)(this.dp,e=>{this.cells.push(this._generateCell(e))})}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach(e=>e.destroy()),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.dp.off(l.eventChangeViewDate,this.onChangeViewDate),this.dp.off(l.eventChangeCurrentView,this.onChangeCurrentView)}static getDaysDates(e,i){let{viewDate:t,opts:{fixedHeight:s},locale:{firstDay:r}}=e,a=he(t),{year:o,month:d}=E(t),c=new Date(o,d,1),u=new Date(o,d,a),h=c.getDay()-r,m=6-u.getDay()+r;h=h<0?h+7:h,m=m>6?m-7:m;let L=function(ce,Ce){let{year:ve,month:Pe,date:ze}=E(ce);return new Date(ve,Pe,ze-Ce)}(c,h),q=a+h+m,N=L.getDate(),{year:W,month:pe}=E(L),de=0;s&&(q=42);let le=[];for(;de<q;){let ce=new Date(W,pe,N+de);i&&i(ce),le.push(ce),de++}return le}static getMonthsDates(e,i){let{year:t}=e.parsedViewDate,s=0,r=[];for(;s<12;){let a=new Date(t,s);r.push(a),i&&i(a),s++}return r}static getYearsDates(e,i){let t=X(e.viewDate),s=t[0]-1,r=t[1]+1,a=s,o=[];for(;a<=r;){let d=new Date(a,0);o.push(d),i&&i(d),a++}return o}static getDatesFunction(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:l.days;return{[l.days]:I.getDaysDates,[l.months]:I.getMonthsDates,[l.years]:I.getYearsDates}[e]}}function w(n,e,i){return(e=function(t){var s=function(r,a){if(typeof r!="object"||r===null)return r;var o=r[Symbol.toPrimitive];if(o!==void 0){var d=o.call(r,"string");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(t);return typeof s=="symbol"?s:String(s)}(e))in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}class V{constructor(e){let{dp:i,opts:t}=e;w(this,"onClickNav",s=>{let r=ee(s.target,".air-datepicker-nav--action");if(!r)return;let a=r.dataset.action;this.dp[a]()}),w(this,"onChangeViewDate",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),w(this,"onChangeCurrentView",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),w(this,"onClickNavTitle",()=>{this.dp.isFinalView||this.dp.up()}),w(this,"update",()=>{let{prevHtml:s,nextHtml:r}=this.opts;this.$prev.innerHTML=s,this.$next.innerHTML=r,this._resetNavStatus(),this.render(),this.handleNavStatus()}),w(this,"renderDelay",()=>{setTimeout(this.render)}),w(this,"render",()=>{this.$title.innerHTML=this._getTitle(),function(s,r){for(let a in r)r[a]?s.classList.add(a):s.classList.remove(a)}(this.$title,{"-disabled-":this.dp.isFinalView})}),this.dp=i,this.opts=t,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}_defineDOM(){this.$title=F(".air-datepicker-nav--title",this.$el),this.$prev=F('[data-action="prev"]',this.$el),this.$next=F('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle)}_bindDatepickerEvents(){this.dp.on(l.eventChangeViewDate,this.onChangeViewDate),this.dp.on(l.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.on(l.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.on(l.eventChangeTime,this.render))}destroy(){this.dp.off(l.eventChangeViewDate,this.onChangeViewDate),this.dp.off(l.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.off(l.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.off(l.eventChangeTime,this.render))}_createElement(){this.$el=P({tagName:"nav",className:"air-datepicker-nav"})}_getTitle(){let{dp:e,opts:i}=this,t=i.navTitles[e.currentView];return typeof t=="function"?t(e):e.formatDate(e.viewDate,t)}handleNavStatus(){let{disableNavWhenOutOfRange:e}=this.opts,{minDate:i,maxDate:t}=this.dp;if(!i&&!t||!e)return;let{year:s,month:r}=this.dp.parsedViewDate,a=!!i&&E(i),o=!!t&&E(t);switch(this.dp.currentView){case l.days:i&&a.month>=r&&a.year>=s&&this._disableNav("prev"),t&&o.month<=r&&o.year<=s&&this._disableNav("next");break;case l.months:i&&a.year>=s&&this._disableNav("prev"),t&&o.year<=s&&this._disableNav("next");break;case l.years:{let d=X(this.dp.viewDate);i&&a.year>=d[0]&&this._disableNav("prev"),t&&o.year<=d[1]&&this._disableNav("next");break}}}_disableNav(e){F('[data-action="'+e+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){(function(e){for(var i=arguments.length,t=new Array(i>1?i-1:0),s=1;s<i;s++)t[s-1]=arguments[s];e.length?e.forEach(r=>{r.classList.remove(...t)}):e.classList.remove(...t)})(this.$el.querySelectorAll(".air-datepicker-nav--action"),"-disabled-")}_buildBaseHtml(){let{prevHtml:e,nextHtml:i}=this.opts;this.$el.innerHTML=`<div class="air-datepicker-nav--action" data-action="prev">${e}</div><div class="air-datepicker-nav--title"></div><div class="air-datepicker-nav--action" data-action="next">${i}</div>`}get isNavIsFunction(){let{navTitles:e}=this.opts;return Object.keys(e).find(i=>typeof e[i]=="function")}}var R={today:{content:n=>n.locale.today,onClick:n=>n.setViewDate(new Date)},clear:{content:n=>n.locale.clear,onClick:n=>n.clear()}};class ie{constructor(e){let{dp:i,opts:t}=e;this.dp=i,this.opts=t,this.init()}init(){this.createElement(),this.render()}createElement(){this.$el=P({className:"air-datepicker-buttons"})}destroy(){this.$el.parentNode.removeChild(this.$el)}clearHtml(){return this.$el.innerHTML="",this}generateButtons(){let{buttons:e}=this.opts;Array.isArray(e)||(e=[e]),e.forEach(i=>{let t=i;typeof i=="string"&&R[i]&&(t=R[i]);let s=this.createButton(t);t.onClick&&this.attachEventToButton(s,t.onClick),this.$el.appendChild(s)})}attachEventToButton(e,i){e.addEventListener("click",()=>{i(this.dp)})}createButton(e){let{content:i,className:t,tagName:s="button",attrs:r={}}=e;return P({tagName:s,innerHtml:`<span tabindex='-1'>${typeof i=="function"?i(this.dp):i}</span>`,className:z("air-datepicker-button",t),attrs:r})}render(){this.generateButtons()}}function k(n,e,i){return(e=function(t){var s=function(r,a){if(typeof r!="object"||r===null)return r;var o=r[Symbol.toPrimitive];if(o!==void 0){var d=o.call(r,"string");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(t);return typeof s=="symbol"?s:String(s)}(e))in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}class j{constructor(){let{opts:e,dp:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};k(this,"toggleTimepickerIsActive",s=>{this.dp.timepickerIsActive=s}),k(this,"onChangeSelectedDate",s=>{let{date:r,updateTime:a=!1}=s;r&&(this.setMinMaxTime(r),this.setCurrentTime(!!a&&r),this.addTimeToDate(r))}),k(this,"onChangeLastSelectedDate",s=>{s&&(this.setTime(s),this.render())}),k(this,"onChangeInputRange",s=>{let r=s.target;this[r.getAttribute("name")]=r.value,this.updateText(),this.dp.trigger(l.eventChangeTime,{hours:this.hours,minutes:this.minutes})}),k(this,"onMouseEnterLeave",s=>{let r=s.target.getAttribute("name"),a=this.$minutesText;r==="hours"&&(a=this.$hoursText),a.classList.toggle("-focus-")}),k(this,"onFocus",()=>{this.toggleTimepickerIsActive(!0)}),k(this,"onBlur",()=>{this.toggleTimepickerIsActive(!1)}),this.opts=e,this.dp=i;let{timeFormat:t}=this.dp.locale;t&&(t.match(f("h"))||t.match(f("hh")))&&(this.ampm=!0),this.init()}init(){this.setTime(this.dp.lastSelectedDate||this.dp.viewDate),this.createElement(),this.buildHtml(),this.defineDOM(),this.render(),this.bindDatepickerEvents(),this.bindDOMEvents()}bindDatepickerEvents(){this.dp.on(l.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(l.eventChangeLastSelectedDate,this.onChangeLastSelectedDate)}bindDOMEvents(){let e="input";navigator.userAgent.match(/trident/gi)&&(e="change"),B(this.$ranges,e,this.onChangeInputRange),B(this.$ranges,"mouseenter",this.onMouseEnterLeave),B(this.$ranges,"mouseleave",this.onMouseEnterLeave),B(this.$ranges,"focus",this.onFocus),B(this.$ranges,"mousedown",this.onFocus),B(this.$ranges,"blur",this.onBlur)}createElement(){this.$el=P({className:z("air-datepicker-time",{"-am-pm-":this.dp.ampm})})}destroy(){this.dp.off(l.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(l.eventChangeLastSelectedDate,this.onChangeLastSelectedDate),this.$el.parentNode.removeChild(this.$el)}buildHtml(){let{ampm:e,hours:i,displayHours:t,minutes:s,minHours:r,minMinutes:a,maxHours:o,maxMinutes:d,dayPeriod:c,opts:{hoursStep:u,minutesStep:h}}=this;this.$el.innerHTML=`<div class="air-datepicker-time--current">   <span class="air-datepicker-time--current-hours">${K(t)}</span>   <span class="air-datepicker-time--current-colon">:</span>   <span class="air-datepicker-time--current-minutes">${K(s)}</span>   `+(e?`<span class='air-datepicker-time--current-ampm'>${c}</span>`:"")+`</div><div class="air-datepicker-time--sliders">   <div class="air-datepicker-time--row">      <input type="range" name="hours" value="${i}" min="${r}" max="${o}" step="${u}"/>   </div>   <div class="air-datepicker-time--row">      <input type="range" name="minutes" value="${s}" min="${a}" max="${d}" step="${h}"/>   </div></div>`}defineDOM(){let e=i=>F(i,this.$el);this.$ranges=this.$el.querySelectorAll('[type="range"]'),this.$hours=e('[name="hours"]'),this.$minutes=e('[name="minutes"]'),this.$hoursText=e(".air-datepicker-time--current-hours"),this.$minutesText=e(".air-datepicker-time--current-minutes"),this.$ampm=e(".air-datepicker-time--current-ampm")}setTime(e){this.setMinMaxTime(e),this.setCurrentTime(e)}addTimeToDate(e){e&&(e.setHours(this.hours),e.setMinutes(this.minutes))}setMinMaxTime(e){if(this.setMinMaxTimeFromOptions(),e){let{minDate:i,maxDate:t}=this.dp;i&&T(e,i)&&this.setMinTimeFromMinDate(i),t&&T(e,t)&&this.setMaxTimeFromMaxDate(t)}}setCurrentTime(e){let{hours:i,minutes:t}=e?E(e):this;this.hours=te(i,this.minHours,this.maxHours),this.minutes=te(t,this.minMinutes,this.maxMinutes)}setMinMaxTimeFromOptions(){let{minHours:e,minMinutes:i,maxHours:t,maxMinutes:s}=this.opts;this.minHours=te(e,0,23),this.minMinutes=te(i,0,59),this.maxHours=te(t,0,23),this.maxMinutes=te(s,0,59)}setMinTimeFromMinDate(e){let{lastSelectedDate:i}=this.dp;this.minHours=e.getHours(),i&&i.getHours()>e.getHours()?this.minMinutes=this.opts.minMinutes:this.minMinutes=e.getMinutes()}setMaxTimeFromMaxDate(e){let{lastSelectedDate:i}=this.dp;this.maxHours=e.getHours(),i&&i.getHours()<e.getHours()?this.maxMinutes=this.opts.maxMinutes:this.maxMinutes=e.getMinutes()}updateSliders(){Z(this.$hours,{min:this.minHours,max:this.maxHours}).value=this.hours,Z(this.$minutes,{min:this.minMinutes,max:this.maxMinutes}).value=this.minutes}updateText(){this.$hoursText.innerHTML=K(this.displayHours),this.$minutesText.innerHTML=K(this.minutes),this.ampm&&(this.$ampm.innerHTML=this.dayPeriod)}set hours(e){this._hours=e;let{hours:i,dayPeriod:t}=ge(e);this.displayHours=this.ampm?i:e,this.dayPeriod=t}get hours(){return this._hours}render(){this.updateSliders(),this.updateText()}}function $(n,e,i){return(e=function(t){var s=function(r,a){if(typeof r!="object"||r===null)return r;var o=r[Symbol.toPrimitive];if(o!==void 0){var d=o.call(r,"string");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(t);return typeof s=="symbol"?s:String(s)}(e))in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}class J{constructor(e){let{dp:i,opts:t}=e;$(this,"pressedKeys",new Set),$(this,"hotKeys",new Map([[[["Control","ArrowRight"],["Control","ArrowUp"]],s=>s.month++],[[["Control","ArrowLeft"],["Control","ArrowDown"]],s=>s.month--],[[["Shift","ArrowRight"],["Shift","ArrowUp"]],s=>s.year++],[[["Shift","ArrowLeft"],["Shift","ArrowDown"]],s=>s.year--],[[["Alt","ArrowRight"],["Alt","ArrowUp"]],s=>s.year+=10],[[["Alt","ArrowLeft"],["Alt","ArrowDown"]],s=>s.year-=10],[["Control","Shift","ArrowUp"],(s,r)=>r.up()]])),$(this,"handleHotKey",s=>{let r=this.hotKeys.get(s),a=E(this.getInitialFocusDate());r(a,this.dp);let{year:o,month:d,date:c}=a,u=he(new Date(o,d));u<c&&(c=u);let h=this.dp.getClampedDate(new Date(o,d,c));this.dp.setFocusDate(h,{viewDateTransition:!0})}),$(this,"isHotKeyPressed",()=>{let s=!1,r=this.pressedKeys.size,a=o=>this.pressedKeys.has(o);for(let[o]of this.hotKeys){if(s)break;if(Array.isArray(o[0]))o.forEach(d=>{s||r!==d.length||(s=d.every(a)&&o)});else{if(r!==o.length)continue;s=o.every(a)&&o}}return s}),$(this,"isArrow",s=>s>=37&&s<=40),$(this,"onKeyDown",s=>{if(!this.dp.visible&&!this.dp.treatAsInline)return;let{key:r,which:a}=s,{dp:o,dp:{focusDate:d},opts:c}=this;this.registerKey(r);let u=this.isHotKeyPressed();if(u)return s.preventDefault(),void this.handleHotKey(u);if(this.isArrow(a))return s.preventDefault(),void this.focusNextCell(r);if(r==="Enter"){if(o.currentView!==c.minView)return void o.down();if(d){let h=o._checkIfDateIsSelected(d);return void(h?o._handleAlreadySelectedDates(h,d):o.selectDate(d))}}r==="Escape"&&this.dp.hide()}),$(this,"onKeyUp",s=>{this.removeKey(s.key)}),this.dp=i,this.opts=t,this.init()}init(){this.bindKeyboardEvents()}bindKeyboardEvents(){let{$el:e}=this.dp;e.addEventListener("keydown",this.onKeyDown),e.addEventListener("keyup",this.onKeyUp)}destroy(){let{$el:e}=this.dp;e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("keyup",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}getInitialFocusDate(){let{focusDate:e,currentView:i,selectedDates:t,parsedViewDate:{year:s,month:r}}=this.dp,a=e||t[t.length-1];if(!a)switch(i){case l.days:a=new Date(s,r,new Date().getDate());break;case l.months:a=new Date(s,r,1);break;case l.years:a=new Date(s,0,1)}return a}focusNextCell(e){let i=this.getInitialFocusDate(),{currentView:t}=this.dp,{days:s,months:r,years:a}=l,o=E(i),d=o.year,c=o.month,u=o.date;switch(e){case"ArrowLeft":t===s&&(u-=1),t===r&&(c-=1),t===a&&(d-=1);break;case"ArrowUp":t===s&&(u-=7),t===r&&(c-=3),t===a&&(d-=4);break;case"ArrowRight":t===s&&(u+=1),t===r&&(c+=1),t===a&&(d+=1);break;case"ArrowDown":t===s&&(u+=7),t===r&&(c+=3),t===a&&(d+=4)}let h=this.dp.getClampedDate(new Date(d,c,u));this.dp.setFocusDate(h,{viewDateTransition:!0})}registerKey(e){this.pressedKeys.add(e)}removeKey(e){this.pressedKeys.delete(e)}}let g={on(n,e){this.__events||(this.__events={}),this.__events[n]?this.__events[n].push(e):this.__events[n]=[e]},off(n,e){this.__events&&this.__events[n]&&(this.__events[n]=this.__events[n].filter(i=>i!==e))},removeAllEvents(){this.__events={}},trigger(n){for(var e=arguments.length,i=new Array(e>1?e-1:0),t=1;t<e;t++)i[t-1]=arguments[t];this.__events&&this.__events[n]&&this.__events[n].forEach(s=>{s(...i)})}};function p(n,e,i){return(e=function(t){var s=function(r,a){if(typeof r!="object"||r===null)return r;var o=r[Symbol.toPrimitive];if(o!==void 0){var d=o.call(r,"string");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(t);return typeof s=="symbol"?s:String(s)}(e))in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}let A="",H="",ae=!1;class U{static buildGlobalContainer(e){ae=!0,A=P({className:e,id:e}),F("body").appendChild(A)}constructor(e,i){var t=this;if(p(this,"viewIndexes",[l.days,l.months,l.years]),p(this,"next",()=>{let{year:a,month:o}=this.parsedViewDate;switch(this.currentView){case l.days:this.setViewDate(new Date(a,o+1,1));break;case l.months:this.setViewDate(new Date(a+1,o,1));break;case l.years:this.setViewDate(new Date(a+10,0,1))}}),p(this,"prev",()=>{let{year:a,month:o}=this.parsedViewDate;switch(this.currentView){case l.days:this.setViewDate(new Date(a,o-1,1));break;case l.months:this.setViewDate(new Date(a-1,o,1));break;case l.years:this.setViewDate(new Date(a-10,0,1))}}),p(this,"_finishHide",()=>{this.hideAnimation=!1,this._destroyComponents(),this.$container.removeChild(this.$datepicker)}),p(this,"setPosition",function(a){let o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(typeof(a=a||t.opts.position)=="function")return void(t.customHide=a({$datepicker:t.$datepicker,$target:t.$el,$pointer:t.$pointer,isViewChange:o,done:t._finishHide}));let d,c,{isMobile:u}=t.opts,h=t.$el.getBoundingClientRect(),m=t.$el.getBoundingClientRect(),L=t.$datepicker.offsetParent,q=t.$el.offsetParent,N=t.$datepicker.getBoundingClientRect(),W=a.split(" "),pe=window.scrollY,de=window.scrollX,le=t.opts.offset,ce=W[0],Ce=W[1];if(u)t.$datepicker.style.cssText="left: 50%; top: 50%";else{if(L===q&&L!==document.body&&(m={top:t.$el.offsetTop,left:t.$el.offsetLeft,width:h.width,height:t.$el.offsetHeight},pe=0,de=0),L!==q&&L!==document.body){let ve=L.getBoundingClientRect();m={top:h.top-ve.top,left:h.left-ve.left,width:h.width,height:h.height},pe=0,de=0}switch(ce){case"top":d=m.top-N.height-le;break;case"right":c=m.left+m.width+le;break;case"bottom":d=m.top+m.height+le;break;case"left":c=m.left-N.width-le}switch(Ce){case"top":d=m.top;break;case"right":c=m.left+m.width-N.width;break;case"bottom":d=m.top+m.height-N.height;break;case"left":c=m.left;break;case"center":/left|right/.test(ce)?d=m.top+m.height/2-N.height/2:c=m.left+m.width/2-N.width/2}t.$datepicker.style.cssText=`left: ${c+de}px; top: ${d+pe}px`}}),p(this,"_setInputValue",()=>{let{opts:a,$altField:o,locale:{dateFormat:d}}=this,{altFieldDateFormat:c,altField:u}=a;u&&o&&(o.value=this._getInputValue(c)),this.$el.value=this._getInputValue(d),this.$el.dispatchEvent(new Event("change"))}),p(this,"_getInputValue",a=>{let{selectedDates:o,opts:d}=this,{multipleDates:c,multipleDatesSeparator:u}=d;if(!o.length)return"";let h=typeof a=="function",m=h?a(c?o:o[0]):o.map(L=>this.formatDate(L,a));return m=h?m:m.join(u),m}),p(this,"_checkIfDateIsSelected",function(a){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.days,d=!1;return t.selectedDates.some(c=>{let u=T(a,c,o);return d=u&&c,u}),d}),p(this,"_scheduleCallAfterTransition",a=>{this._cancelScheduledCall(),a&&a(!1),this._onTransitionEnd=()=>{a&&a(!0)},this.$datepicker.addEventListener("transitionend",this._onTransitionEnd,{once:!0})}),p(this,"_cancelScheduledCall",()=>{this.$datepicker.removeEventListener("transitionend",this._onTransitionEnd)}),p(this,"setViewDate",a=>{if(!((a=y(a))instanceof Date)||T(a,this.viewDate))return;let o=this.viewDate;this.viewDate=a;let{onChangeViewDate:d}=this.opts;if(d){let{month:c,year:u}=this.parsedViewDate;d({month:c,year:u,decade:this.curDecade})}this.trigger(l.eventChangeViewDate,a,o)}),p(this,"setFocusDate",function(a){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!a||(a=y(a))instanceof Date)&&(t.focusDate=a,t.trigger(l.eventChangeFocusDate,a,o))}),p(this,"setCurrentView",function(a){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.viewIndexes.includes(a)){if(t.currentView=a,t.elIsInput&&t.visible&&t.setPosition(void 0,!0),t.trigger(l.eventChangeCurrentView,a),!t.views[a]){let d=t.views[a]=new I({dp:t,opts:t.opts,type:a});t.shouldUpdateDOM&&t.$content.appendChild(d.$el)}t.opts.onChangeView&&!o.silent&&t.opts.onChangeView(a)}}),p(this,"_updateLastSelectedDate",a=>{this.lastSelectedDate=a,this.trigger(l.eventChangeLastSelectedDate,a)}),p(this,"destroy",()=>{if(this.isDestroyed)return;let{showEvent:a,isMobile:o}=this.opts,d=this.$datepicker.parentNode;d&&d.removeChild(this.$datepicker),this.$el.removeEventListener(a,this._onFocus),this.$el.removeEventListener("blur",this._onBlur),window.removeEventListener("resize",this._onResize),o&&this._removeMobileAttributes(),this.keyboardNav&&this.keyboardNav.destroy(),this.views=null,this.nav=null,this.$datepicker=null,this.opts={},this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDates=[],this.rangeDateFrom=null,this.rangeDateTo=null,this.isDestroyed=!0}),p(this,"update",function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=ne({},t.opts),{silent:c}=o;ne(t.opts,a);let{timepicker:u,buttons:h,range:m,selectedDates:L,isMobile:q}=t.opts,N=t.visible||t.treatAsInline;t._createMinMaxDates(),t._limitViewDateByMaxMinDates(),t._handleLocale(),L&&(t.selectedDates=[],t.selectDate(L,{silent:c})),a.view&&t.setCurrentView(a.view,{silent:c}),t._setInputValue(),d.range&&!m?(t.rangeDateTo=!1,t.rangeDateFrom=!1):!d.range&&m&&t.selectedDates.length&&(t.rangeDateFrom=t.selectedDates[0],t.rangeDateTo=t.selectedDates[1]),d.timepicker&&!u?(N&&t.timepicker.destroy(),t.timepicker=!1,t.$timepicker.parentNode.removeChild(t.$timepicker)):!d.timepicker&&u&&t._addTimepicker(),!d.buttons&&h?t._addButtons():d.buttons&&!h?(t.buttons.destroy(),t.$buttons.parentNode.removeChild(t.$buttons)):N&&d.buttons&&h&&t.buttons.clearHtml().render(),!d.isMobile&&q?(t.treatAsInline||H||t._createMobileOverlay(),t._addMobileAttributes(),t.visible&&t._showMobileOverlay()):d.isMobile&&!q&&(t._removeMobileAttributes(),t.visible&&(H.classList.remove("-active-"),typeof t.opts.position!="function"&&t.setPosition())),N&&(t.nav.update(),t.views[t.currentView].render(),t.currentView===l.days&&t.views[t.currentView].renderDayNames())}),p(this,"disableDate",(a,o)=>{(Array.isArray(a)?a:[a]).forEach(d=>{let c=y(d);if(!c)return;let u=o?"delete":"add";this.disabledDates[u](this.formatDate(c,"yyyy-MM-dd"));let h=this.getCell(c,this.currentViewSingular);h&&h.adpCell.render()},[])}),p(this,"enableDate",a=>{this.disableDate(a,!0)}),p(this,"isDateDisabled",a=>{let o=y(a);return this.disabledDates.has(this.formatDate(o,"yyyy-MM-dd"))}),p(this,"isOtherMonth",a=>{let{month:o}=E(a);return o!==this.parsedViewDate.month}),p(this,"isOtherYear",a=>{let{year:o}=E(a);return o!==this.parsedViewDate.year}),p(this,"isOtherDecade",a=>{let{year:o}=E(a),[d,c]=X(this.viewDate);return o<d||o>c}),p(this,"_onChangeSelectedDate",a=>{let{silent:o}=a;setTimeout(()=>{this._setInputValue(),this.opts.onSelect&&!o&&this._triggerOnSelect()})}),p(this,"_onChangeFocusedDate",function(a){let{viewDateTransition:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!a)return;let d=!1;o&&(d=t.isOtherMonth(a)||t.isOtherYear(a)||t.isOtherDecade(a)),d&&t.setViewDate(a),t.opts.onFocus&&t.opts.onFocus({datepicker:t,date:a})}),p(this,"_onChangeTime",a=>{let{hours:o,minutes:d}=a,c=new Date,{lastSelectedDate:u,opts:{onSelect:h}}=this,m=u;u||(m=c);let L=this.getCell(m,this.currentViewSingular),q=L&&L.adpCell;q&&q.isDisabled||(m.setHours(o),m.setMinutes(d),u?(this._setInputValue(),h&&this._triggerOnSelect()):this.selectDate(m))}),p(this,"_onFocus",a=>{this.visible||this.show()}),p(this,"_onBlur",a=>{this.inFocus||!this.visible||this.opts.isMobile||this.hide()}),p(this,"_onMouseDown",a=>{this.inFocus=!0}),p(this,"_onMouseUp",a=>{this.inFocus=!1,this.$el.focus()}),p(this,"_onResize",()=>{this.visible&&typeof this.opts.position!="function"&&this.setPosition()}),p(this,"_onClickOverlay",()=>{this.visible&&this.hide()}),p(this,"getViewDates",function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:l.days;return I.getDatesFunction(a)(t)}),p(this,"isWeekend",a=>this.opts.weekends.includes(a)),p(this,"getClampedDate",a=>{let{minDate:o,maxDate:d}=this,c=a;return d&&G(a,d)?c=d:o&&Q(a,o)&&(c=o),c}),this.$el=F(e),!this.$el)return;this.$datepicker=P({className:"air-datepicker"}),this.opts=ne({},Y,i),this.$customContainer=!!this.opts.container&&F(this.opts.container),this.$altField=F(this.opts.altField||!1);let{view:s,startDate:r}=this.opts;r||(this.opts.startDate=new Date),this.$el.nodeName==="INPUT"&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=y(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute("readonly"),this.customHide=!1,this.currentView=s,this.selectedDates=[],this.disabledDates=new Set,this.isDestroyed=!1,this.views={},this.keys=[],this.rangeDateFrom="",this.rangeDateTo="",this.timepickerIsActive=!1,this.treatAsInline=this.opts.inline||!this.elIsInput,this.init()}init(){let{opts:e,treatAsInline:i,opts:{inline:t,isMobile:s,selectedDates:r,keyboardNav:a,onlyTimepicker:o}}=this,d=F("body");(!ae||ae&&A&&!d.contains(A))&&!t&&this.elIsInput&&!this.$customContainer&&U.buildGlobalContainer(U.defaultGlobalContainerId),!s||H||i||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(t||this._bindEvents(),a&&!o&&(this.keyboardNav=new J({dp:this,opts:e}))),r&&this.selectDate(r,{silent:!0}),this.opts.visible&&!i&&this.show(),s&&!i&&this.$el.setAttribute("readonly",!0),i&&this._createComponents()}_createMobileOverlay(){H=P({className:"air-datepicker-overlay"}),A.appendChild(H)}_createComponents(){let{opts:e,treatAsInline:i,opts:{inline:t,buttons:s,timepicker:r,position:a,classes:o,onlyTimepicker:d,isMobile:c}}=this;this._buildBaseHtml(),this.elIsInput&&(t||this._setPositionClasses(a)),!t&&this.elIsInput||this.$datepicker.classList.add("-inline-"),o&&this.$datepicker.classList.add(...o.split(" ")),d&&this.$datepicker.classList.add("-only-timepicker-"),c&&!i&&this._addMobileAttributes(),this.views[this.currentView]=new I({dp:this,type:this.currentView,opts:e}),this.nav=new V({dp:this,opts:e}),r&&this._addTimepicker(),s&&this._addButtons(),this.$content.appendChild(this.views[this.currentView].$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){for(let e in this.views)this.views[e].destroy();this.views={},this.nav.destroy(),this.timepicker&&this.timepicker.destroy()}_addMobileAttributes(){H.addEventListener("click",this._onClickOverlay),this.$datepicker.classList.add("-is-mobile-"),this.$el.setAttribute("readonly",!0)}_removeMobileAttributes(){H.removeEventListener("click",this._onClickOverlay),this.$datepicker.classList.remove("-is-mobile-"),this.initialReadonly||this.initialReadonly===""||this.$el.removeAttribute("readonly")}_createMinMaxDates(){let{minDate:e,maxDate:i}=this.opts;this.minDate=!!e&&y(e),this.maxDate=!!i&&y(i)}_addTimepicker(){this.$timepicker=P({className:"air-datepicker--time"}),this.$datepicker.appendChild(this.$timepicker),this.timepicker=new j({dp:this,opts:this.opts}),this.$timepicker.appendChild(this.timepicker.$el)}_addButtons(){this.$buttons=P({className:"air-datepicker--buttons"}),this.$datepicker.appendChild(this.$buttons),this.buttons=new ie({dp:this,opts:this.opts}),this.$buttons.appendChild(this.buttons.$el)}_bindSubEvents(){this.on(l.eventChangeSelectedDate,this._onChangeSelectedDate),this.on(l.eventChangeFocusDate,this._onChangeFocusedDate),this.on(l.eventChangeTime,this._onChangeTime)}_buildBaseHtml(){let{inline:e}=this.opts;var i,t;this.elIsInput?e?(i=this.$datepicker,(t=this.$el).parentNode.insertBefore(i,t.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class="air-datepicker--pointer"></i><div class="air-datepicker--navigation"></div><div class="air-datepicker--content"></div>',this.$content=F(".air-datepicker--content",this.$datepicker),this.$pointer=F(".air-datepicker--pointer",this.$datepicker),this.$nav=F(".air-datepicker--navigation",this.$datepicker)}_handleLocale(){let{locale:e,dateFormat:i,firstDay:t,timepicker:s,onlyTimepicker:r,timeFormat:a,dateTimeSeparator:o}=this.opts;var d;this.locale=(d=e,JSON.parse(JSON.stringify(d))),i&&(this.locale.dateFormat=i),a!==void 0&&a!==""&&(this.locale.timeFormat=a);let{timeFormat:c}=this.locale;if(t!==""&&(this.locale.firstDay=t),s&&typeof i!="function"){let u=c?o:"";this.locale.dateFormat=[this.locale.dateFormat,c||""].join(u)}r&&typeof i!="function"&&(this.locale.dateFormat=this.locale.timeFormat)}_setPositionClasses(e){if(typeof e=="function")return void this.$datepicker.classList.add("-custom-position-");let i=(e=e.split(" "))[0],t=`air-datepicker -${i}-${e[1]}- -from-${i}-`;this.$datepicker.classList.add(...t.split(" "))}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener("blur",this._onBlur),this.$datepicker.addEventListener("mousedown",this._onMouseDown),this.$datepicker.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}_limitViewDateByMaxMinDates(){let{viewDate:e,minDate:i,maxDate:t}=this;t&&G(e,t)&&this.setViewDate(t),i&&Q(e,i)&&this.setViewDate(i)}formatDate(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.viewDate,i=arguments.length>1?arguments[1]:void 0;if(e=y(e),!(e instanceof Date))return;let t=i,s=this.locale,r=E(e),a=r.dayPeriod,o=X(e),d=U.replacer,c={T:e.getTime(),m:r.minutes,mm:r.fullMinutes,h:r.hours12,hh:r.fullHours12,H:r.hours,HH:r.fullHours,aa:a,AA:a.toUpperCase(),E:s.daysShort[r.day],EEEE:s.days[r.day],d:r.date,dd:r.fullDate,M:r.month+1,MM:r.fullMonth,MMM:s.monthsShort[r.month],MMMM:s.months[r.month],yy:r.year.toString().slice(-2),yyyy:r.year,yyyy1:o[0],yyyy2:o[1]};for(let[u,h]of Object.entries(c))t=d(t,f(u),h);return t}down(e){this._handleUpDownActions(e,"down")}up(e){this._handleUpDownActions(e,"up")}selectDate(e){let i,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{currentView:s,parsedViewDate:r,selectedDates:a}=this,{updateTime:o,silent:d}=t,{moveToOtherMonthsOnSelect:c,moveToOtherYearsOnSelect:u,multipleDates:h,range:m,autoClose:L,onBeforeSelect:q}=this.opts,N=a.length;if(Array.isArray(e))return e.forEach(W=>{this.selectDate(W,t)}),new Promise(W=>{setTimeout(W)});if((e=y(e))instanceof Date){if(q&&!d&&!q({date:e,datepicker:this}))return Promise.resolve();if(s===l.days&&e.getMonth()!==r.month&&c&&(i=new Date(e.getFullYear(),e.getMonth(),1)),s===l.years&&e.getFullYear()!==r.year&&u&&(i=new Date(e.getFullYear(),0,1)),i&&this.setViewDate(i),h&&!m){if(N===h)return;this._checkIfDateIsSelected(e)||a.push(e)}else if(m)switch(N){case 1:a.push(e),this.rangeDateTo||(this.rangeDateTo=e),G(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=e),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[e],this.rangeDateFrom=e,this.rangeDateTo="";break;default:this.selectedDates=[e],this.rangeDateFrom=e}else this.selectedDates=[e];return this.trigger(l.eventChangeSelectedDate,{action:l.actionSelectDate,silent:t?.silent,date:e,updateTime:o}),this._updateLastSelectedDate(e),L&&!this.timepickerIsActive&&this.visible&&(h||m?m&&N===1&&this.hide():this.hide()),new Promise(W=>{setTimeout(W)})}}unselectDate(e){let i=this.selectedDates,t=this;if((e=y(e))instanceof Date)return i.some((s,r)=>{if(T(s,e))return i.splice(r,1),t.selectedDates.length?(t.rangeDateTo="",t.rangeDateFrom=i[0],t._updateLastSelectedDate(t.selectedDates[t.selectedDates.length-1])):(t.rangeDateFrom="",t.rangeDateTo="",t._updateLastSelectedDate(!1)),this.trigger(l.eventChangeSelectedDate,{action:l.actionUnselectDate,date:e}),!0})}replaceDate(e,i){let t=this.selectedDates.find(r=>T(r,e,this.currentView)),s=this.selectedDates.indexOf(t);s<0||T(this.selectedDates[s],i,this.currentView)||(this.selectedDates[s]=i,this.trigger(l.eventChangeSelectedDate,{action:l.actionSelectDate,date:i,updateTime:!0}),this._updateLastSelectedDate(i))}clear(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.selectedDates=[],this.rangeDateFrom=!1,this.rangeDateTo=!1,this.lastSelectedDate=!1,this.trigger(l.eventChangeSelectedDate,{action:l.actionUnselectDate,silent:e.silent}),new Promise(i=>{setTimeout(i)})}show(){let{onShow:e,isMobile:i}=this.opts;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add("-active-"),this.visible=!0,e&&this._scheduleCallAfterTransition(e),i&&this._showMobileOverlay()}hide(){let{onHide:e,isMobile:i}=this.opts,t=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove("-active-"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition(s=>{!this.customHide&&(s&&t||!s&&!t)&&this._finishHide(),e&&e(s)}),i&&H.classList.remove("-active-")}_triggerOnSelect(){let e=[],i=[],{selectedDates:t,locale:s,opts:{onSelect:r,multipleDates:a,range:o}}=this,d=a||o,c=typeof s.dateFormat=="function";t.length&&(e=t.map(oe),i=c?a?s.dateFormat(e):e.map(u=>s.dateFormat(u)):e.map(u=>this.formatDate(u,s.dateFormat))),r({date:d?e:e[0],formattedDate:d?i:i[0],datepicker:this})}_handleAlreadySelectedDates(e,i){let{selectedDates:t,rangeDateFrom:s,rangeDateTo:r}=this,{range:a,toggleSelected:o}=this.opts,d=t.length,c=typeof o=="function"?o({datepicker:this,date:i}):o,u=!!(a&&d===1&&e),h=u?oe(i):i;a&&!c&&(d!==2&&this.selectDate(h),d===2&&T(s,r))||(c?this.unselectDate(h):this._updateLastSelectedDate(u?h:e))}_handleUpDownActions(e,i){if(!((e=y(e||this.focusDate||this.viewDate))instanceof Date))return;let t=i==="up"?this.viewIndex+1:this.viewIndex-1;t>2&&(t=2),t<0&&(t=0),this.setViewDate(new Date(e.getFullYear(),e.getMonth(),1)),this.setCurrentView(this.viewIndexes[t])}getCell(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.day;if(!((e=y(e))instanceof Date))return;let{year:t,month:s,date:r}=E(e),a=`[data-year="${t}"]`,o=`[data-month="${s}"]`,d={[l.day]:`${a}${o}[data-date="${r}"]`,[l.month]:`${a}${o}`,[l.year]:`${a}`};return this.views[this.currentView]?this.views[this.currentView].$el.querySelector(d[i]):void 0}_showMobileOverlay(){H.classList.add("-active-")}_hasTransition(){return window.getComputedStyle(this.$datepicker).getPropertyValue("transition-duration").split(", ").reduce((e,i)=>parseFloat(i)+e,0)>0}get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return E(this.viewDate)}get currentViewSingular(){return this.currentView.slice(0,-1)}get curDecade(){return X(this.viewDate)}get viewIndex(){return this.viewIndexes.indexOf(this.currentView)}get isFinalView(){return this.currentView===l.years}get hasSelectedDates(){return this.selectedDates.length>0}get isMinViewReached(){return this.currentView===this.opts.minView||this.currentView===l.days}get $container(){return this.$customContainer||A}static replacer(e,i,t){return e.replace(i,function(s,r,a,o){return r+t+o})}}var we;return p(U,"defaults",Y),p(U,"version","3.6.0"),p(U,"defaultGlobalContainerId","air-datepicker-global-container"),we=U.prototype,Object.assign(we,g),C.default}()})});var Te=fe(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.default=void 0;var Ye={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",dateFormat:"MM/dd/yyyy",timeFormat:"hh:mm aa",firstDay:0};be.default=Ye});var Ae=fe(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.default=void 0;var Ke={days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],daysShort:["zo","ma","di","wo","do","vr","za"],daysMin:["zo","ma","di","wo","do","vr","za"],months:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],monthsShort:["Jan","Feb","Mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],today:"Vandaag",clear:"Legen",dateFormat:"dd-MM-yyyy",timeFormat:"HH:mm",firstDay:0};ke.default=Ke});var Ee=fe(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.default=void 0;var Je={days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],daysShort:["Son","Mon","Die","Mit","Don","Fre","Sam"],daysMin:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","M\xE4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthsShort:["Jan","Feb","M\xE4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],today:"Heute",clear:"L\xF6schen",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1};De.default=Je});var Ve=ye($e(),1),_e=ye(Te(),1),He=ye(Ae(),1),Ne=ye(Ee(),1);var We=!0,Xe="AIzaSyA3LzIwr4sbLguFgF02W7QguXG1Y2wv7fQ",Qe="places",Ze="beta",et=1,Fe=100,tt="dd-MM-yyyy";var it=0,at=90,D={originInput:"cargo_origin",destinationInput:"cargo_destination",cargoTypeSelect:"cargo_type",cargoTypeDisplay:"cargo_type_display",dateInput:"cargo_date",seaCheckbox:"cargo_option_sea",airCheckbox:"cargo_option_air",trainCheckbox:"cargo_option_train",submitButton:'[data-button-click="cargo_submit"]',dropdown:'[data-element="dropdown"]',dropdownLink:'[data-element="dropdown-link"]',dropdownCity:'[data-element="city"]',dropdownCountry:'[data-element="country"]',errorClass:"is-error",errorElement:".cargo_field-error",inputField:".cargo_input-field",cargoField:".cargo_field",dateContainer:".cargo_field:has(#cargo_date)"},Me=[{id:D.seaCheckbox,value:"sea"},{id:D.airCheckbox,value:"air"},{id:D.trainCheckbox,value:"rail"}],Le={excludeFromUrl:["other lcl","lcl"],emptyValue:["other fcl","fcl"]},rt="/inquiry",Oe=200,re={focusedBackground:"#f5f5f5",defaultBackground:"white"},Ie={locationSuggestions:"Location suggestions",cargoTypeOptions:"Cargo type options"};function _(...b){We&&console.log("[TEST MODE]",...b)}function st(){return new Promise((b,C)=>{if(window.google&&window.google.maps&&window.google.maps.places){_("Google Maps API already loaded"),b();return}if(document.querySelector('script[src*="maps.googleapis.com"]')){_("Google Maps API script already present, waiting for load...");let Y=setInterval(()=>{window.google&&window.google.maps&&window.google.maps.places&&(clearInterval(Y),_("Google Maps API loaded"),b())},100);return}_("Loading Google Maps API script...");let l=document.createElement("script");l.src=`https://maps.googleapis.com/maps/api/js?key=${Xe}&libraries=${Qe}&v=${Ze}`,l.async=!0,l.defer=!0,l.onload=()=>{_("Google Maps API script loaded successfully"),b()},l.onerror=()=>{console.error("Failed to load Google Maps API"),C(new Error("Failed to load Google Maps API"))},document.head.appendChild(l)})}function ot(b){let C=b.getFullYear(),l=String(b.getMonth()+1).padStart(2,"0"),Y=String(b.getDate()).padStart(2,"0");return`${C}-${l}-${Y}`}function se(b){if(!b)return;b.classList.add(D.errorClass);let C=b.parentElement?.querySelector(D.errorElement);C&&(C.style.display="block")}function me(b){if(!b)return;b.classList.remove(D.errorClass);let C=b.parentElement?.querySelector(D.errorElement);C&&(C.style.display="none")}function nt(){document.querySelectorAll(D.inputField).forEach(b=>{b.classList.remove(D.errorClass)}),document.querySelectorAll(D.errorElement).forEach(b=>{b.style.display="none"}),_("Page loaded, error states cleared")}function dt(){let b=document.documentElement.lang||"en";return({nl:He.default,de:Ne.default,en:_e.default}[b.toLowerCase()]||_e.default).default}window.Webflow||(window.Webflow=[]);window.Webflow.push(()=>{nt();let b=dt(),C=document.getElementById(D.dateInput);C&&(C.readOnly=!0,C.style.cursor="pointer");let l="";new Ve.default(`#${D.dateInput}`,{locale:b,firstDay:1,dateFormat:tt,minDate:new Date(Date.now()+it*24*60*60*1e3),maxDate:new Date(Date.now()+at*24*60*60*1e3),toggleSelected:!1,container:D.dateContainer,autoClose:!0,minView:"days",position:"bottom right",onSelect:function({date:y,formattedDate:f}){y&&(l=ot(y),_("Date selected:",f,"(ISO:",l+")")),me(C)}});let Y=[],F=[],P=!1,Z=!1;function he(y,f,M){let v=document.getElementById(y);if(!v||!M)return console.error("Input or dropdown not found for",y),null;let S=null,O=null,x=!1,I=!1,w=-1,V=M.querySelector(D.dropdownLink);if(!V)return console.error("Template not found for",y),null;let R=`${y}_dropdown_list`;M.id=R,M.setAttribute("role","listbox"),M.setAttribute("aria-label",Ie.locationSuggestions),v.setAttribute("role","combobox"),v.setAttribute("aria-autocomplete","list"),v.setAttribute("aria-controls",R),v.setAttribute("aria-expanded","false"),M.style.display="none";let ie=()=>{M.style.display="block",v.setAttribute("aria-expanded","true"),w=-1,_(y,"dropdown opened")},k=()=>{M.style.display="none",v.setAttribute("aria-expanded","false"),w=-1,_(y,"dropdown closed")},j=()=>{let g=v.value.trim(),p=I||f.some(A=>A.combination===g);return!p&&g.length>0?(se(v),_(y,"validation failed")):(me(v),_(y,"validation passed")),p},$=g=>{let p=M.querySelectorAll(`${D.dropdownLink}:not([style*="display: none"])`);p.forEach(A=>{A.style.backgroundColor=re.defaultBackground,A.setAttribute("aria-selected","false")}),g>=0&&g<p.length?(w=g,p[g].style.backgroundColor=re.focusedBackground,p[g].setAttribute("aria-selected","true"),p[g].scrollIntoView({block:"nearest"}),v.setAttribute("aria-activedescendant",p[g].id)):(w=-1,v.removeAttribute("aria-activedescendant"))},J=async g=>{if(!x){x=!0,_(y,"searching for:",g),S||(S=new google.maps.places.AutocompleteSessionToken);try{let A=(await google.maps.places.AutocompleteSuggestion.fetchAutocompleteSuggestions({input:g,sessionToken:S})).suggestions;if(!A||A.length===0){x=!1,k(),_(y,"no suggestions found");return}let H=A.map(n=>n.placePrediction.toPlace().fetchFields({fields:["addressComponents"]})),ae=await Promise.all(H);f.length=0;let U=new Set;ae.forEach(n=>{let e=n.place,i=null,t=null;if(e.addressComponents&&e.addressComponents.forEach(s=>{let r=s.types;(r.includes("locality")||!i&&r.includes("postal_town")||!i&&r.includes("administrative_area_level_2"))&&(i=s.longText),r.includes("country")&&(t=s.longText)}),i&&t){let s=`${i}, ${t}`;U.has(s)||(U.add(s),f.push({city:i,country:t,combination:s}))}}),M.querySelectorAll(D.dropdownLink).forEach((n,e)=>{e>0&&n.remove()}),E(M,V,f,v,ie,k,I),_(y,"found",f.length,"results"),S=new google.maps.places.AutocompleteSessionToken,x=!1}catch(p){console.error("Error fetching place details:",p),x=!1,k()}}};return v.addEventListener("focus",async function(){if(this.select(),!P&&!Z){Z=!0;try{await st(),P=!0,Z=!1}catch(g){console.error("Failed to load Google Maps API:",g),Z=!1;return}}f.length>0&&ie(),_(y,"input focused")}),v.addEventListener("blur",()=>{setTimeout(()=>{M.contains(document.activeElement)||k()},Oe)}),v.addEventListener("keydown",g=>{let p=M.style.display==="block",A=M.querySelectorAll(`${D.dropdownLink}:not([style*="display: none"])`);if((g.key===" "||g.keyCode===32)&&g.stopPropagation(),g.key==="Escape"||g.key==="Tab"){k();return}if(p&&A.length>0){if(g.key==="ArrowDown")g.preventDefault(),$((w+1)%A.length);else if(g.key==="ArrowUp")g.preventDefault(),$(w<=0?A.length-1:w-1);else if(g.key==="Enter"&&w>=0){g.preventDefault();let H=A[w],ae=H.querySelector(D.dropdownCity)?.textContent,U=H.querySelector(D.dropdownCountry)?.textContent;ae&&U&&(v.value=`${ae}, ${U}`,I=!0,k(),j(),_(y,"selected via keyboard:",v.value))}}}),v.addEventListener("input",function(){let g=v.value;if(I=!1,me(v),O&&clearTimeout(O),g.length<et){O=setTimeout(()=>{f.length=0,M.querySelectorAll(D.dropdownLink).forEach((A,H)=>{H>0&&A.remove()}),k()},Fe);return}if(!P){_(y,"waiting for Google Maps API to load...");return}O=setTimeout(()=>{J(g)},Fe)}),document.addEventListener("click",g=>{!v.contains(g.target)&&!M.contains(g.target)&&k()}),j}function E(y,f,M,v,S,O){if(M.length===0){O();return}f.style.display="none",M.forEach((x,I)=>{let w=f.cloneNode(!0);w.style.display="block",w.setAttribute("role","option"),w.setAttribute("id",`${y.id}_option_${I}`),w.setAttribute("aria-selected","false"),w.setAttribute("tabindex","-1");let V=w.querySelector(D.dropdownCity),R=w.querySelector(D.dropdownCountry);V&&(V.textContent=x.city),R&&(R.textContent=x.country),w.addEventListener("mouseenter",()=>{w.style.backgroundColor=re.focusedBackground}),w.addEventListener("mouseleave",()=>{w.style.backgroundColor=re.defaultBackground}),w.addEventListener("click",()=>{v.value=x.combination,v.dispatchEvent(new Event("selected-from-dropdown")),O(),me(v),_("User selected from dropdown:",x.combination)}),y.appendChild(w)}),S()}function ge(){let y=document.getElementById(D.cargoTypeSelect),f=document.getElementById(D.cargoTypeDisplay),v=f?.parentElement?.querySelector(D.dropdown);if(!y||!f||!v)return console.error("Cargo type elements not found"),null;let S=-1;f.readOnly=!0,f.style.cursor="pointer",f.setAttribute("role","combobox"),f.setAttribute("aria-autocomplete","list"),f.setAttribute("aria-expanded","false"),f.placeholder="Select cargo type",y.style.display="none";let O=v.querySelector(D.dropdownLink);if(!O)return console.error("Template not found for cargo type"),null;let x="cargo_type_dropdown_list";v.id=x,v.setAttribute("role","listbox"),v.setAttribute("aria-label",Ie.cargoTypeOptions),f.setAttribute("aria-controls",x),v.style.display="none";let I=()=>{v.style.display="block",f.setAttribute("aria-expanded","true"),S=-1,_("Cargo type dropdown opened")},w=()=>{v.style.display="none",f.setAttribute("aria-expanded","false"),S=-1,_("Cargo type dropdown closed")},V=k=>{let j=v.querySelectorAll(`${D.dropdownLink}:not([style*="display: none"])`);j.forEach($=>{$.style.backgroundColor=re.defaultBackground,$.setAttribute("aria-selected","false")}),k>=0&&k<j.length?(S=k,j[k].style.backgroundColor=re.focusedBackground,j[k].setAttribute("aria-selected","true"),j[k].scrollIntoView({block:"nearest"}),f.setAttribute("aria-activedescendant",j[k].id)):(S=-1,f.removeAttribute("aria-activedescendant"))},R=()=>{let k=f.value.trim().length>0;return k?(me(f),_("Cargo type validation passed")):(se(f),_("Cargo type validation failed")),k};return(()=>{v.querySelectorAll(D.dropdownLink).forEach(($,J)=>{J>0&&$.remove()}),O.style.display="none",y.querySelectorAll("option").forEach(($,J)=>{let g=O.cloneNode(!0);g.style.display="block",g.setAttribute("role","option"),g.setAttribute("id",`${x}_option_${J}`),g.setAttribute("aria-selected","false"),g.setAttribute("data-value",$.value),g.setAttribute("tabindex","-1");let p=g.querySelector(D.dropdownCity),A=g.querySelector(D.dropdownCountry);p&&(p.textContent=$.textContent,p.style.marginBottom="0"),A&&(A.style.display="none"),g.addEventListener("mouseenter",()=>{g.style.backgroundColor=re.focusedBackground}),g.addEventListener("mouseleave",()=>{g.style.backgroundColor=re.defaultBackground}),g.addEventListener("click",()=>{f.value=$.textContent,y.value=$.value,w(),R(),_("User selected cargo type:",$.value,"-",$.textContent)}),v.appendChild(g)})})(),_("Cargo type dropdown initialized without default selection"),f.addEventListener("click",()=>{v.style.display==="none"?I():w()}),f.addEventListener("keydown",k=>{let j=v.style.display==="block",$=v.querySelectorAll(`${D.dropdownLink}:not([style*="display: none"])`);if(k.key===" "||k.keyCode===32){k.preventDefault(),k.stopPropagation(),j?w():I();return}if(k.key==="Escape"||k.key==="Tab"){w();return}if(j&&$.length>0){if(k.key==="ArrowDown")k.preventDefault(),V((S+1)%$.length);else if(k.key==="ArrowUp")k.preventDefault(),V(S<=0?$.length-1:S-1);else if(k.key==="Enter"&&S>=0){k.preventDefault();let J=$[S],g=J.getAttribute("data-value"),p=J.querySelector(D.dropdownCity)?.textContent;g&&p&&(f.value=p,y.value=g,w(),R(),_("User selected cargo type via keyboard:",g,"-",p))}}}),f.addEventListener("blur",()=>{setTimeout(w,Oe)}),document.addEventListener("click",k=>{!f.contains(k.target)&&!v.contains(k.target)&&w()}),R}function K(){return Me.filter(y=>document.getElementById(y.id)?.checked).map(y=>y.value)}function X(){let f=K().length>0;return Me.forEach(M=>{let v=document.getElementById(M.id);if(v){let S=v.closest(D.cargoField);if(S){let O=S.querySelector(D.errorElement);O&&(O.style.display=f?"none":"block")}}}),_(f?"Transport mode validation passed":"Transport mode validation failed"),f}let z=document.getElementById(D.originInput),T=document.getElementById(D.destinationInput),G=z?.parentElement?.querySelector(D.dropdown),Q=T?.parentElement?.querySelector(D.dropdown),oe=z&&G?he(D.originInput,Y,G):null,B=T&&Q?he(D.destinationInput,F,Q):null,ee=ge();Me.forEach(y=>{let f=document.getElementById(y.id);f&&f.addEventListener("change",()=>{_("Transport modes changed:",K())})});function te(y){y.preventDefault(),_("User clicked submit button");let f=z?.value||"",M=T?.value||"",v=document.getElementById(D.cargoTypeSelect)?.value||"",S=l||"",O=K(),x=!0;if(oe&&!oe()?(se(z),x=!1):f||(se(z),x=!1),B&&!B()?(se(T),x=!1):M||(se(T),x=!1),ee&&!ee()?x=!1:v||(se(document.getElementById(D.cargoTypeDisplay)),x=!1),S||(se(C),x=!1),X()||(x=!1),!x){_("Form validation failed:",{origin:f||"MISSING",destination:M||"MISSING",containerType:v||"MISSING",transportDate:S||"MISSING",transportModes:O.length>0?O:"MISSING"});return}_("Form validation passed");let w=document.querySelector(D.submitButton)?.getAttribute("href")||rt,V=new URLSearchParams;V.append("origin",f),V.append("destination",M),V.append("transportDate",S),V.append("transportMode",O.join(","));let R=v.toLowerCase();Le.excludeFromUrl.includes(R)||(Le.emptyValue.includes(R)?V.append("containerType",""):V.append("containerType",v));let ie=`${w}?${V.toString()}`;_("Final URL constructed:",ie),_("Form data:",{origin:f,destination:M,containerType:v,transportDate:S,transportModes:O}),_("Redirecting user..."),window.location.href=ie}let ne=document.querySelector(D.submitButton);ne?(ne.addEventListener("click",te),_("Submit button listener attached")):console.error("Submit button not found")});})();
